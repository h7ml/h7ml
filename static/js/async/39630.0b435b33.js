/*! For license information please see 39630.0b435b33.js.LICENSE.txt */
(self.webpackChunkh7ml=self.webpackChunkh7ml||[]).push([["39630"],{57072:function(e,n,t){"use strict";t.r(n);var r=t("52676"),o=t("40453");function s(e){let n=Object.assign({h1:"h1",a:"a",pre:"pre",code:"code"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"proxy-observe-\u6838\u5FC3\u4EE3\u7801-\u81EA\u5B9A\u4E49\u5B9E\u73B0",children:["proxy-observe \u6838\u5FC3\u4EE3\u7801 \u81EA\u5B9A\u4E49\u5B9E\u73B0",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#proxy-observe-\u6838\u5FC3\u4EE3\u7801-\u81EA\u5B9A\u4E49\u5B9E\u73B0",children:"#"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// \u521B\u5EFA\u54CD\u5E94\u5F0F\nfunction reactive(target = {}) {\n  if (typeof target !== 'object' || target == null) {\n    // \u4E0D\u662F\u5BF9\u8C61\u6216\u6570\u7EC4\uFF0C\u5219\u8FD4\u56DE\n    return target;\n  }\n\n  // \u4EE3\u7406\u914D\u7F6E\n  const proxyConf = {\n    get(target, key, receiver) {\n      // \u53EA\u5904\u7406\u672C\u8EAB\uFF08\u975E\u539F\u578B\u7684\uFF09\u5C5E\u6027\n      const ownKeys = Reflect.ownKeys(target);\n      if (ownKeys.includes(key)) {\n        console.log('get', key); // \u76D1\u542C\n      }\n\n      const result = Reflect.get(target, key, receiver);\n\n      // \u6DF1\u5EA6\u76D1\u542C\n      // \u6027\u80FD\u5982\u4F55\u63D0\u5347\u7684\uFF1F\n      return reactive(result);\n    },\n    set(target, key, val, receiver) {\n      // \u91CD\u590D\u7684\u6570\u636E\uFF0C\u4E0D\u5904\u7406\n      if (val === target[key]) {\n        return true;\n      }\n\n      const ownKeys = Reflect.ownKeys(target);\n      if (ownKeys.includes(key)) {\n        console.log('\u5DF2\u6709\u7684 key', key);\n      } else {\n        console.log('\u65B0\u589E\u7684 key', key);\n      }\n\n      const result = Reflect.set(target, key, val, receiver);\n      console.log('set', key, val);\n      // console.log('result', result) // true\n      return result; // \u662F\u5426\u8BBE\u7F6E\u6210\u529F\n    },\n    deleteProperty(target, key) {\n      const result = Reflect.deleteProperty(target, key);\n      console.log('delete property', key);\n      // console.log('result', result) // true\n      return result; // \u662F\u5426\u5220\u9664\u6210\u529F\n    },\n  };\n\n  // \u751F\u6210\u4EE3\u7406\u5BF9\u8C61\n  const observed = new Proxy(target, proxyConf);\n  return observed;\n}\n\n// \u6D4B\u8BD5\u6570\u636E\nconst data = {\n  name: 'zhangsan',\n  age: 20,\n  info: {\n    city: 'beijing',\n    a: {\n      b: {\n        c: {\n          d: {\n            e: 100,\n          },\n        },\n      },\n    },\n  },\n};\n\nconst proxyData = reactive(data);\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}n.default=a,a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["posts%2Fvue%2Fproxy-observe.md"]={toc:[],title:"proxy-observe \u6838\u5FC3\u4EE3\u7801 \u81EA\u5B9A\u4E49\u5B9E\u73B0",frontmatter:{icon:"vue",order:1,date:"2021-06-27T00:00:00.000Z",author:"h7ml",category:"vue",tag:"vue",star:!0}}}}]);