/*! For license information please see 22686.5bfa6ac8.js.LICENSE.txt */
(self.webpackChunkh7ml=self.webpackChunkh7ml||[]).push([["22686"],{22436:function(e,n,c){"use strict";c.r(n);var t=c("52676"),i=c("40453");function r(e){let n=Object.assign({h2:"h2",a:"a",p:"p",code:"code",h3:"h3",pre:"pre",blockquote:"blockquote",img:"img",strong:"strong",ol:"ol",li:"li",ul:"ul"},(0,i.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h2,{id:"nexttick",children:["nextTick",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nexttick",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u505A\u9879\u76EE\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u7ECF\u5E38\u4F1A\u7528\u5230",(0,t.jsx)(n.code,{children:"nextTick"}),"\uFF0C\u7B80\u5355\u7684\u7406\u89E3\u5C31\u662F\u5B83\u5C31\u662F\u4E00\u4E2A",(0,t.jsx)(n.code,{children:"setTimeout"}),"\u51FD\u6570\uFF0C\u5C06\u51FD\u6570\u653E\u5230\u5F02\u6B65\u540E\u53BB\u5904\u7406\uFF1B\u5C06\u5B83\u66FF\u6362\u6210",(0,t.jsx)(n.code,{children:"setTimeout"}),"\u597D\u50CF\u4E5F\u80FD\u8DD1\u8D77\u6765\uFF0C\u4F46\u5B83\u4EC5\u4EC5\u8FD9\u4E48\u7B80\u5355\u5417\uFF1F\u90A3\u4E3A\u4EC0\u4E48\u6211\u4EEC\u4E0D\u76F4\u63A5\u7528",(0,t.jsx)(n.code,{children:"setTimeout"}),"\u5462\uFF1F\u8BA9\u6211\u4EEC\u6DF1\u5165\u5256\u6790\u4E00\u4E0B\u3002"]}),"\n",(0,t.jsxs)(n.h3,{id:"\u5148\u770B\u4E00\u4E2A\u4F8B\u5B50",children:["\u5148\u770B\u4E00\u4E2A\u4F8B\u5B50",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5148\u770B\u4E00\u4E2A\u4F8B\u5B50",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-vue",children:"<template>\n  <div>\n    <div ref=\"message\">{{ message }}</div>\n    <button @click=\"handleClick\">\u70B9\u51FB</button>\n  </div>\n</template>\n<script>\n  export default {\n      data () {\n          return {\n              message: 'begin'\n          };\n      },\n      methods () {\n          handleClick () {\n              this.message = 'end';\n              console.log(this.$refs.message.innerText); //\u6253\u5370\u201Cbegin\u201D\n          }\n      }\n  }\n<\/script>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6253\u5370\u51FA\u6765\u7684\u7ED3\u679C\u662F",(0,t.jsx)(n.code,{children:"begin"}),"\uFF0C\u6211\u4EEC\u5728\u70B9\u51FB\u4E8B\u4EF6\u91CC\u660E\u660E\u5C06",(0,t.jsx)(n.code,{children:"message"}),"\u8D4B\u503C\u4E3A",(0,t.jsx)(n.code,{children:"end"}),"\uFF0C\u800C\u83B7\u53D6\u771F\u5B9E DOM \u8282\u70B9\u7684 innerHTML \u5374\u6CA1\u6709\u5F97\u5230\u9884\u671F\u4E2D\u7684",(0,t.jsx)(n.code,{children:"begin"}),"\uFF0C\u4E3A\u4EC0\u4E48\uFF1F"]}),"\n",(0,t.jsx)(n.p,{children:"\u540C\u6837\u7684\u60C5\u51B5\u4E5F\u53D1\u751F\u5728\u7ED9\u5B50\u7EC4\u4EF6\u4F20\u53C2\u4E0A\uFF1B\u6211\u4EEC\u7ED9\u5B50\u7EC4\u4EF6\u4F20\u53C2\u6570\u540E\uFF0C\u5728\u5B50\u7EC4\u4EF6\u4E2D\u8C03\u7528\u51FD\u6570\u67E5\u770B\u53C2\u6570\u3002"}),"\n",(0,t.jsxs)(n.h3,{id:"\u518D\u770B\u4E00\u4E2A\u4F8B\u5B50",children:["\u518D\u770B\u4E00\u4E2A\u4F8B\u5B50",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u518D\u770B\u4E00\u4E2A\u4F8B\u5B50",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:"<div id=\"app\">\n  <div class=\"msg\">\n    <form-report ref=\"child\" :name=\"childName\"></form-report>\n  </div>\n</div>\n<script>\n  Vue.component('form-report', {\n    props: ['name'],\n    methods: {\n      showName() {\n        console.log(this.name);\n      },\n    },\n    template: '<div>{{name}}</div>',\n  });\n  new Vue({\n    el: '#app',\n    data: function () {\n      return {\n        childName: '',\n      };\n    },\n    mounted() {\n      this.childName = '\u6211\u662F\u5B50\u7EC4\u4EF6\u540D\u5B57';\n      this.$refs.child.showName(); // '' \u7A7A\n    },\n  });\n<\/script>\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u867D\u7136\u9875\u9762\u4E0A\u5C55\u793A\u4E86\u5B50\u7EC4\u4EF6\u7684 name\uFF0C\u4F46\u662F\u6253\u5370\u51FA\u6765\u5374\u662F\u7A7A\u503C\uFF1A"}),"\n",(0,t.jsxs)(n.h3,{id:"\u5F02\u6B65\u66F4\u65B0",children:["\u5F02\u6B65\u66F4\u65B0",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5F02\u6B65\u66F4\u65B0",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u6211\u4EEC\u53D1\u73B0\u4E0A\u8FF0\u4E24\u4E2A\u95EE\u9898\u7684\u53D1\u751F\uFF0C\u4E0D\u7BA1\u5B50\u7EC4\u4EF6\u8FD8\u662F\u7236\u7EC4\u4EF6\uFF0C\u90FD\u662F\u5728\u7ED9 data \u4E2D\u8D4B\u503C\u540E\u7ACB\u9A6C\u53BB\u67E5\u770B\u6570\u636E\u5BFC\u81F4\u7684\u3002\u7531\u4E8E",(0,t.jsx)(n.code,{children:"\u67E5\u770B\u6570\u636E"}),"\u8FD9\u4E2A\u52A8\u4F5C\u662F\u540C\u6B65\u64CD\u4F5C\u7684\uFF0C\u800C\u4E14\u90FD\u662F\u5728\u8D4B\u503C\u4E4B\u540E\uFF1B\u56E0\u6B64\u6211\u4EEC\u731C\u6D4B\u4E00\u4E0B\uFF0C\u7ED9\u6570\u636E\u8D4B\u503C\u64CD\u4F5C\u662F\u4E00\u4E2A\u5F02\u6B65\u64CD\u4F5C\uFF0C\u5E76\u6CA1\u6709\u9A6C\u4E0A\u6267\u884C\uFF0CVue \u5B98\u7F51\u5BF9\u6570\u636E\u64CD\u4F5C\u662F\u8FD9\u4E48\u63CF\u8FF0\u7684\uFF1A"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u53EF\u80FD\u4F60\u8FD8\u6CA1\u6709\u6CE8\u610F\u5230\uFF0CVue \u5728\u66F4\u65B0 DOM \u65F6\u662F\u5F02\u6B65\u6267\u884C\u7684\u3002\u53EA\u8981\u4FA6\u542C\u5230\u6570\u636E\u53D8\u5316\uFF0CVue \u5C06\u5F00\u542F\u4E00\u4E2A\u961F\u5217\uFF0C\u5E76\u7F13\u51B2\u5728\u540C\u4E00\u4E8B\u4EF6\u5FAA\u73AF\u4E2D\u53D1\u751F\u7684\u6240\u6709\u6570\u636E\u53D8\u66F4\u3002\u5982\u679C\u540C\u4E00\u4E2A",(0,t.jsx)(n.code,{children:"watcher"}),"\u88AB\u591A\u6B21\u89E6\u53D1\uFF0C\u53EA\u4F1A\u88AB\u63A8\u5165\u5230\u961F\u5217\u4E2D\u4E00\u6B21\u3002\u8FD9\u79CD\u5728\u7F13\u51B2\u65F6\u53BB\u9664\u91CD\u590D\u6570\u636E\u5BF9\u4E8E\u907F\u514D\u4E0D\u5FC5\u8981\u7684\u8BA1\u7B97\u548C DOM \u64CD\u4F5C\u662F\u975E\u5E38\u91CD\u8981\u7684\u3002\u7136\u540E\uFF0C\u5728\u4E0B\u4E00\u4E2A\u7684\u4E8B\u4EF6\u5FAA\u73AF\u201Ctick\u201D\u4E2D\uFF0CVue \u5237\u65B0\u961F\u5217\u5E76\u6267\u884C\u5B9E\u9645 (\u5DF2\u53BB\u91CD\u7684) \u5DE5\u4F5C\u3002Vue \u5728\u5185\u90E8\u5BF9\u5F02\u6B65\u961F\u5217\u5C1D\u8BD5\u4F7F\u7528\u539F\u751F\u7684 ",(0,t.jsx)(n.code,{children:"Promise.then"}),"\u3001",(0,t.jsx)(n.code,{children:"MutationObserver"})," \u548C ",(0,t.jsx)(n.code,{children:"setImmediate"}),"\uFF0C\u5982\u679C\u6267\u884C\u73AF\u5883\u4E0D\u652F\u6301\uFF0C\u5219\u4F1A\u91C7\u7528 ",(0,t.jsx)(n.code,{children:"setTimeout(fn, 0)"})," \u4EE3\u66FF\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4E5F\u5C31\u662F\u8BF4\u6211\u4EEC\u5728\u8BBE\u7F6E",(0,t.jsx)(n.code,{children:"this.msg = 'some thing'"}),"\u7684\u65F6\u5019\uFF0CVue \u5E76\u6CA1\u6709\u9A6C\u4E0A\u53BB\u66F4\u65B0 DOM \u6570\u636E\uFF0C\u800C\u662F\u5C06\u8FD9\u4E2A\u64CD\u4F5C\u653E\u8FDB\u4E00\u4E2A\u961F\u5217\u4E2D\uFF1B\u5982\u679C\u6211\u4EEC\u91CD\u590D\u6267\u884C\u7684\u8BDD\uFF0C\u961F\u5217\u8FD8\u4F1A\u8FDB\u884C\u53BB\u91CD\u64CD\u4F5C\uFF1B\u7B49\u5F85\u540C\u4E00\u4E8B\u4EF6\u5FAA\u73AF\u4E2D\u7684\u6240\u6709\u6570\u636E\u53D8\u5316\u5B8C\u6210\u4E4B\u540E\uFF0C\u4F1A\u5C06\u961F\u5217\u4E2D\u7684\u4E8B\u4EF6\u62FF\u51FA\u6765\u5904\u7406\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u8FD9\u6837\u505A\u4E3B\u8981\u662F\u4E3A\u4E86\u63D0\u5347\u6027\u80FD\uFF0C\u56E0\u4E3A\u5982\u679C\u5728\u4E3B\u7EBF\u7A0B\u4E2D\u66F4\u65B0 DOM\uFF0C\u5FAA\u73AF 100 \u6B21\u5C31\u8981\u66F4\u65B0 100 \u6B21 DOM\uFF1B\u4F46\u662F\u5982\u679C\u7B49\u4E8B\u4EF6\u5FAA\u73AF\u5B8C\u6210\u4E4B\u540E\u66F4\u65B0 DOM\uFF0C\u53EA\u9700\u8981\u66F4\u65B0 1 \u6B21\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u4E3A\u4E86\u5728\u6570\u636E\u66F4\u65B0\u64CD\u4F5C\u4E4B\u540E\u64CD\u4F5C DOM\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u6570\u636E\u53D8\u5316\u4E4B\u540E\u7ACB\u5373\u4F7F\u7528",(0,t.jsx)(n.code,{children:"Vue.nextTick(callback)"}),"\uFF1B\u8FD9\u6837\u56DE\u8C03\u51FD\u6570\u4F1A\u5728 DOM \u66F4\u65B0\u5B8C\u6210\u540E\u88AB\u8C03\u7528\uFF0C\u5C31\u53EF\u4EE5\u62FF\u5230\u6700\u65B0\u7684 DOM \u5143\u7D20\u4E86\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// \u7B2C\u4E00\u4E2Ademo\nthis.msg = '\u6211\u662F\u6D4B\u8BD5\u6587\u5B57'\nthis.$nextTick(() => {\n  console.log(document.querySelector('.msg').offsetHeight) // 20\n})\n\n// \u7B2C\u4E8C\u4E2Ademo\nthis.childName = '\u6211\u662F\u5B50\u7EC4\u4EF6\u540D\u5B57'\nthis.$nextTick(() => {\n  this.$refs.child.showName() // \u6211\u662F\u5B50\u7EC4\u4EF6\u540D\u5B57\n})\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"\u4E8B\u4EF6\u8F6E\u8BE2",children:["\u4E8B\u4EF6\u8F6E\u8BE2",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E8B\u4EF6\u8F6E\u8BE2",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"Vue.js \u5728\u4FEE\u6539\u6570\u636E\u7684\u65F6\u5019\uFF0C\u4E0D\u4F1A\u7ACB\u9A6C\u4FEE\u6539\u6570\u636E\uFF0C\u800C\u662F\u8981\u7B49\u540C\u4E00\u4E8B\u4EF6\u8F6E\u8BE2\u7684\u6570\u636E\u90FD\u66F4\u65B0\u5B8C\u4E4B\u540E\uFF0C\u518D\u7EDF\u4E00\u8FDB\u884C\u89C6\u56FE\u66F4\u65B0\u3002 \u77E5\u4E4E\u4E0A\u7684\u4F8B\u5B50\uFF1A"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"// \u6539\u53D8\u6570\u636E\nvm.message = 'changed'\n\n// \u60F3\u8981\u7ACB\u5373\u4F7F\u7528\u66F4\u65B0\u540E\u7684DOM\u3002\u8FD9\u6837\u4E0D\u884C\uFF0C\u56E0\u4E3A\u8BBE\u7F6Emessage\u540EDOM\u8FD8\u6CA1\u6709\u66F4\u65B0\nconsole.log(vm.$el.textContent) // \u5E76\u4E0D\u4F1A\u5F97\u5230'changed'\n\n// \u8FD9\u6837\u53EF\u4EE5\uFF0CnextTick\u91CC\u9762\u7684\u4EE3\u7801\u4F1A\u5728DOM\u66F4\u65B0\u540E\u6267\u884C\nVue.nextTick(() => {\n  console.log(vm.$el.textContent) // \u53EF\u4EE5\u5F97\u5230'changed'\n})\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://nakoruru.h7ml.cn/httpproxy/static.5ibug.net/vitepress/assets/images/nextTick.png",alt:""})}),"\n",(0,t.jsxs)(n.h3,{id:"nexttick-\u6E90\u7801\u5206\u6790",children:["nextTick \u6E90\u7801\u5206\u6790",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#nexttick-\u6E90\u7801\u5206\u6790",children:"#"})]}),"\n",(0,t.jsxs)(n.p,{children:["\u4E86\u89E3\u4E86",(0,t.jsx)(n.code,{children:"nextTick"}),"\u7684\u7528\u6CD5\u548C\u539F\u7406\u4E4B\u540E\uFF0C\u6211\u4EEC\u5C31\u6765\u770B\u4E00\u4E0B Vue \u662F\u600E\u4E48\u6765\u5B9E\u73B0\u8FD9\u6CE2\u201C\u64CD\u4F5C\u201D\u7684\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["Vue \u628A",(0,t.jsx)(n.code,{children:"nextTick"}),"\u7684\u6E90\u7801\u5355\u72EC\u62BD\u5230\u4E00\u4E2A\u6587\u4EF6\u4E2D\uFF0C",(0,t.jsx)(n.code,{children:"/src/core/util/next-tick.js"}),"\uFF0C\u5220\u6389\u6CE8\u91CA\u4E5F\u5C31\u5927\u6982\u516D\u4E03\u5341\u884C\u7684\u6837\u5B50\uFF0C\u8BA9\u6211\u4EEC\u9010\u6BB5\u6765\u5206\u6790\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"/**\n * Defer a task to execute it asynchronously.\n */\n/*\n    \u5EF6\u8FDF\u4E00\u4E2A\u4EFB\u52A1\u4F7F\u5176\u5F02\u6B65\u6267\u884C\uFF0C\u5728\u4E0B\u4E00\u4E2Atick\u65F6\u6267\u884C\uFF0C\u4E00\u4E2A\u7ACB\u5373\u6267\u884C\u51FD\u6570\uFF0C\u8FD4\u56DE\u4E00\u4E2Afunction\n    \u8FD9\u4E2A\u51FD\u6570\u7684\u4F5C\u7528\u662F\u5728task\u6216\u8005microtask\u4E2D\u63A8\u5165\u4E00\u4E2AtimerFunc\uFF0C\u5728\u5F53\u524D\u8C03\u7528\u6808\u6267\u884C\u5B8C\u4EE5\u540E\u4EE5\u6B64\u6267\u884C\u76F4\u5230\u6267\u884C\u5230timerFunc\n    \u76EE\u7684\u662F\u5EF6\u8FDF\u5230\u5F53\u524D\u8C03\u7528\u6808\u6267\u884C\u5B8C\u4EE5\u540E\u6267\u884C\n*/\nexport const nextTick = (function () {\n  const callbacks = []; // \u9700\u8981\u6267\u884C\u7684\u56DE\u8C03\u51FD\u6570\n  let pending = false; // \u662F\u5426\u6B63\u5728\u6267\u884C\u56DE\u8C03\u51FD\u6570\n  let timerFunc; // \u89E6\u53D1\u6267\u884C\u56DE\u8C03\u51FD\u6570\n\n  // \u6267\u884C\u6240\u6709callback\n  function nextTickHandler() {\n    pending = false;\n    const copies = callbacks.slice(0);\n    callbacks.length = 0;\n    for (let i = 0; i < copies.length; i++) {\n      copies[i]();\n    }\n  }\n\n  /*\n    \u4E09\u79CD\u5C1D\u8BD5\u5F97\u5230timerFunc\u7684\u65B9\u6CD5\n    - Promise\n    - MutationObserver\n    - setTimeout\n    \u524D\u4E24\u4E2A\u65B9\u6CD5\u90FD\u4F1A\u5728microtask\u4E2D\u6267\u884C\uFF0C\u6240\u4EE5\u4F18\u5148\u4F7F\u7528\uFF0C\u4E0D\u652F\u6301\u518D\u4F7F\u7528 setTimeout\n  */\n  if (typeof Promise !== 'undefined' && isNative(Promise)) {\n    var p = Promise.resolve();\n    var logError = (err) => {\n      console.error(err);\n    };\n    timerFunc = () => {\n      p.then(nextTickHandler).catch(logError);\n      if (isIOS) setTimeout(noop);\n    };\n  } else if (\n    typeof MutationObserver !== 'undefined' &&\n    (isNative(MutationObserver) ||\n      // PhantomJS and iOS 7.x\n      MutationObserver.toString() === '[object MutationObserverConstructor]')\n  ) {\n    var counter = 1;\n    var observer = new MutationObserver(nextTickHandler);\n    var textNode = document.createTextNode(String(counter));\n    observer.observe(textNode, {\n      characterData: true,\n    });\n    timerFunc = () => {\n      counter = (counter + 1) % 2;\n      textNode.data = String(counter);\n    };\n  } else {\n    timerFunc = () => {\n      setTimeout(nextTickHandler, 0);\n    };\n  }\n\n  /*\n    \u63A8\u9001\u5230\u961F\u5217\u4E2D\u4E0B\u4E00\u4E2Atick\u65F6\u6267\u884C\n    cb \u56DE\u8C03\u51FD\u6570\n    ctx \u4E0A\u4E0B\u6587\n  */\n  return function queueNextTick(cb?: Function, ctx?: Object) {\n    let _resolve;\n    /*cb\u5B58\u5230callbacks\u4E2D*/\n    callbacks.push(() => {\n      if (cb) {\n        try {\n          cb.call(ctx);\n        } catch (e) {\n          handleError(e, ctx, 'nextTick');\n        }\n      } else if (_resolve) {\n        _resolve(ctx);\n      }\n    });\n    if (!pending) {\n      pending = true;\n      timerFunc();\n    }\n    if (!cb && typeof Promise !== 'undefined') {\n      return new Promise((resolve, reject) => {\n        _resolve = resolve;\n      });\n    }\n  };\n})();\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5176\u4E2D",(0,t.jsx)(n.code,{children:"Promise"}),"\u548C",(0,t.jsx)(n.code,{children:"setTimeout"}),"\u5F88\u597D\u7406\u89E3\uFF0C\u662F\u4E00\u4E2A\u5F02\u6B65\u4EFB\u52A1\uFF0C\u4F1A\u5728\u540C\u6B65\u4EFB\u52A1\u4EE5\u53CA\u66F4\u65B0 DOM \u7684\u5F02\u6B65\u4EFB\u52A1\u4E4B\u540E\u56DE\u8C03\u5177\u4F53\u51FD\u6570\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4E0B\u9762\u7740\u91CD\u4ECB\u7ECD\u4E00\u4E0B",(0,t.jsx)(n.code,{children:"MutationObserver"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"MutationObserver"}),"\u662F HTML5 \u4E2D\u7684\u65B0 API\uFF0C\u662F\u4E2A\u7528\u6765",(0,t.jsx)(n.strong,{children:"\u76D1\u89C6 DOM \u53D8\u52A8\u7684\u63A5\u53E3"}),"\u3002\u4ED6\u80FD\u76D1\u542C\u4E00\u4E2A DOM \u5BF9\u8C61\u4E0A\u53D1\u751F\u7684\u5B50\u8282\u70B9\u5220\u9664\u3001\u5C5E\u6027\u4FEE\u6539\u3001\u6587\u672C\u5185\u5BB9\u4FEE\u6539\u7B49\u7B49\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u8C03\u7528\u8FC7\u7A0B\u5F88\u7B80\u5355\uFF0C\u4F46\u662F\u6709\u70B9\u4E0D\u592A\u5BFB\u5E38\uFF1A\u4F60\u9700\u8981\u5148\u7ED9\u4ED6\u7ED1\u56DE\u8C03\uFF1A"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const mo = new MutationObserver(callback)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u901A\u8FC7\u7ED9",(0,t.jsx)(n.code,{children:"MutationObserver"}),"\u7684\u6784\u9020\u51FD\u6570\u4F20\u5165\u4E00\u4E2A\u56DE\u8C03\uFF0C\u80FD\u5F97\u5230\u4E00\u4E2A",(0,t.jsx)(n.code,{children:"MutationObserver"}),"\u5B9E\u4F8B\uFF0C\u8FD9\u4E2A\u56DE\u8C03\u5C31\u4F1A\u5728",(0,t.jsx)(n.code,{children:"MutationObserver"}),"\u5B9E\u4F8B\u76D1\u542C\u5230\u53D8\u52A8\u65F6\u89E6\u53D1\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u8FD9\u4E2A\u65F6\u5019\u4F60\u53EA\u662F\u7ED9 MutationObserver \u5B9E\u4F8B\u7ED1\u5B9A\u597D\u4E86\u56DE\u8C03\uFF0C\u4ED6\u5177\u4F53\u76D1\u542C\u54EA\u4E2A DOM\u3001\u76D1\u542C\u8282\u70B9\u5220\u9664\u8FD8\u662F\u76D1\u542C\u5C5E\u6027\u4FEE\u6539\uFF0C\u8FD8\u6CA1\u6709\u8BBE\u7F6E\u3002\u800C\u8C03\u7528\u4ED6\u7684 observer \u65B9\u6CD5\u5C31\u53EF\u4EE5\u5B8C\u6210\u8FD9\u4E00\u6B65:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const domTarget = document.xxx\nmo.observe(domTarget, {\n  characterData: true, // \u8BF4\u660E\u76D1\u542C\u6587\u672C\u5185\u5BB9\u7684\u4FEE\u6539\u3002\n})\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://nakoruru.h7ml.cn/httpproxy/static.5ibug.net/vitepress/assets/images/nextTick2.png",alt:""})}),"\n",(0,t.jsxs)(n.p,{children:["\u5728",(0,t.jsx)(n.code,{children:"nextTick"}),"\u4E2D",(0,t.jsx)(n.code,{children:"MutationObserver"}),"\u7684\u4F5C\u7528\u5C31\u5982\u4E0A\u56FE\u6240\u793A\u3002\u5728\u76D1\u542C\u5230 DOM \u66F4\u65B0\u540E\uFF0C\u8C03\u7528\u56DE\u8C03\u51FD\u6570\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5176\u5B9E\u4F7F\u7528",(0,t.jsx)(n.code,{children:"MutationObserver"}),"\u7684\u539F\u56E0\u5C31\u662F",(0,t.jsx)(n.code,{children:"nextTick"}),"\u60F3\u8981\u4E00\u4E2A\u5F02\u6B65 API\uFF0C\u7528\u6765\u5728\u5F53\u524D\u7684\u540C\u6B65\u4EE3\u7801\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u6267\u884C\u6211\u60F3\u6267\u884C\u7684\u5F02\u6B65\u56DE\u8C03\uFF0C\u5305\u62EC",(0,t.jsx)(n.code,{children:"Promise"}),"\u548C",(0,t.jsx)(n.code,{children:"setTimeout"}),"\u90FD\u662F\u57FA\u4E8E\u8FD9\u4E2A\u539F\u56E0\u3002"]}),"\n",(0,t.jsxs)(n.h3,{id:"\u5B9E\u73B0\u4E00\u4E2A\u7B80\u6613\u7684-nexttick",children:["\u5B9E\u73B0\u4E00\u4E2A\u7B80\u6613\u7684 nextTick",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5B9E\u73B0\u4E00\u4E2A\u7B80\u6613\u7684-nexttick",children:"#"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const callbacks = []\nlet pending = false\n\nfunction nextTick(cb) {\n  callbacks.push(cb)\n\n  if (!pending) {\n    pending = true\n    setTimeout(flushCallback, 0)\n  }\n}\n\nfunction flushCallback() {\n  pending = false\n  const copies = callbacks.slice()\n  callbacks.length = 0\n  for (let i = 0; i < copies.length; i++)\n    copies[i]()\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u53EF\u4EE5\u770B\u5230\uFF0C\u5728\u7B80\u6613\u7248\u7684 nextTick \u4E2D\uFF0C\u901A\u8FC7 nextTick \u63A5\u6536\u56DE\u8C03\u51FD\u6570\uFF0C\u901A\u8FC7 setTimeout \u6765\u5F02\u6B65\u6267\u884C\u56DE\u8C03\u51FD\u6570\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u5728\u4E0B\u4E00\u4E2A tick \u4E2D\u6267\u884C\u56DE\u8C03\u51FD\u6570\uFF0C\u5373\u5728 UI \u91CD\u65B0\u6E32\u67D3\u540E\u6267\u884C\u56DE\u8C03\u51FD\u6570\u3002"}),"\n",(0,t.jsxs)(n.h3,{id:"\u603B\u7ED3",children:["\u603B\u7ED3",(0,t.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u603B\u7ED3",children:"#"})]}),"\n",(0,t.jsx)(n.p,{children:"\u5230\u8FD9\u91CC\uFF0C\u6574\u4F53 nextTick \u7684\u4EE3\u7801\u90FD\u5206\u6790\u5B8C\u6BD5\u4E86\uFF0C\u603B\u7ED3\u4E00\u4E0B\u5B83\u7684\u6D41\u7A0B\u5C31\u662F\uFF1A"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u628A\u56DE\u8C03\u51FD\u6570\u653E\u5165 callbacks \u7B49\u5F85\u6267\u884C"}),"\n",(0,t.jsx)(n.li,{children:"\u5C06\u6267\u884C\u51FD\u6570\u653E\u5230\u5FAE\u4EFB\u52A1\u6216\u8005\u5B8F\u4EFB\u52A1\u4E2D"}),"\n",(0,t.jsx)(n.li,{children:"\u4E8B\u4EF6\u5FAA\u73AF\u5230\u4E86\u5FAE\u4EFB\u52A1\u6216\u8005\u5B8F\u4EFB\u52A1\uFF0C\u6267\u884C\u51FD\u6570\u4F9D\u6B21\u6267\u884C callbacks \u4E2D\u7684\u56DE\u8C03"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://juejin.im/post/5eb095b05188256d7674a257#heading-0",target:"_blank",rel:"noopener noreferrer",children:"Vue \u4E2D$nextTick \u6E90\u7801\u89E3\u6790"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://juejin.im/post/5b85b3326fb9a019fc76ecee#heading-4",target:"_blank",rel:"noopener noreferrer",children:"Vue.js \u5F02\u6B65\u66F4\u65B0\u53CA nextTick"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://juejin.im/post/5c03500e6fb9a049d37ed754#heading-0",target:"_blank",rel:"noopener noreferrer",children:"Vue \u6E90\u7801\u89E3\u6790\u4E4B nextTick"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.jianshu.com/p/a7550c0e164f",target:"_blank",rel:"noopener noreferrer",children:"\u7B80\u5355\u7406\u89E3 Vue \u4E2D\u7684 nextTick"})}),"\n"]})]})}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}n.default=s,s.__RSPRESS_PAGE_META={},s.__RSPRESS_PAGE_META["posts%2Fvue%2FnextTick.md"]={toc:[{text:"nextTick",id:"nexttick",depth:2},{text:"\u5148\u770B\u4E00\u4E2A\u4F8B\u5B50",id:"\u5148\u770B\u4E00\u4E2A\u4F8B\u5B50",depth:3},{text:"\u518D\u770B\u4E00\u4E2A\u4F8B\u5B50",id:"\u518D\u770B\u4E00\u4E2A\u4F8B\u5B50",depth:3},{text:"\u5F02\u6B65\u66F4\u65B0",id:"\u5F02\u6B65\u66F4\u65B0",depth:3},{text:"\u4E8B\u4EF6\u8F6E\u8BE2",id:"\u4E8B\u4EF6\u8F6E\u8BE2",depth:3},{text:"nextTick \u6E90\u7801\u5206\u6790",id:"nexttick-\u6E90\u7801\u5206\u6790",depth:3},{text:"\u5B9E\u73B0\u4E00\u4E2A\u7B80\u6613\u7684 nextTick",id:"\u5B9E\u73B0\u4E00\u4E2A\u7B80\u6613\u7684-nexttick",depth:3},{text:"\u603B\u7ED3",id:"\u603B\u7ED3",depth:3}],title:"nextTick",frontmatter:{icon:"vue",order:3,date:"2021-07-12T00:00:00.000Z",author:"h7ml",title:"nextTick",category:"vue",tag:["vue","nextTick"],star:!0,lastUpdated:!1}}}}]);