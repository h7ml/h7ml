/*! For license information please see 43472.86771e81.js.LICENSE.txt */
(self.webpackChunkh7ml=self.webpackChunkh7ml||[]).push([["43472"],{91768:function(n,e,s){"use strict";s.r(e);var r=s("52676"),i=s("40453");function t(n){let e=Object.assign({p:"p",strong:"strong",a:"a",code:"code",blockquote:"blockquote",h1:"h1",pre:"pre",img:"img"},(0,i.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5EFA\u8BAE\u5148\u770B\u4E00\u4E0B\u4E0A\u7BC7"})," ",(0,r.jsx)(e.a,{href:"https://www.h7ml.cn/posts/designPattern/observer.html",target:"_blank",rel:"noopener noreferrer",children:"\u89C2\u5BDF\u8005\u6A21\u5F0F"})," \uFF0C\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F\u548C\u89C2\u5BDF\u8005\u6A21\u5F0F\u672C\u8D28\u4E0A\u8FD8\u662F\u4E00\u6837\u7684\uFF0C\u5E76\u4E14\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F\u4E5F\u6CA1\u6709\u5728\u7ECF\u5178\u7684\u8BBE\u8BA1\u6A21\u5F0F\u4E66 ",(0,r.jsx)(e.code,{children:"GoF"})," \u4E2D\u51FA\u73B0\uFF0C\u5F88\u591A\u5730\u65B9\u4E5F\u76F4\u63A5\u628A\u4E24\u8005\u770B\u6210\u4E00\u79CD\u8BBE\u8BA1\u6A21\u5F0F\u4E86\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"GoF"})," \u7684\u540D\u5B57\u4E5F\u6709\u4E2A\u6709\u8DA3\u7684\u6545\u4E8B\uFF0C",(0,r.jsx)(e.a,{href:"http://wiki.c2.com/?GangOfFour",target:"_blank",rel:"noopener noreferrer",children:"\u8FD9\u91CC"})," \u8D34\u8FC7\u6765\uFF1A"]}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["The authors of the ",(0,r.jsx)(e.a,{href:"http://wiki.c2.com/?DesignPatternsBook",target:"_blank",rel:"noopener noreferrer",children:"DesignPatternsBook"}),' came to be known as the "Gang of Four." The name of the book ("Design Patterns: Elements of Reusable Object-Oriented Software") is too long for e-mail, so "book by the gang of four" became a shorthand name for it. After all, it isn\'t the ONLY book on patterns. That got shortened to "GOF book", which is pretty cryptic the first time you hear it.']}),"\n"]}),"\n",(0,r.jsxs)(e.h1,{id:"\u573A\u666F",children:["\u573A\u666F",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u573A\u666F",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"\u5047\u8BBE\u6211\u4EEC\u5728\u5F00\u53D1\u4E00\u6B3E\u5916\u5356\u7F51\u7AD9\uFF0C\u8FDB\u5165\u7F51\u7AD9\u7684\u65F6\u5019\uFF0C\u7B2C\u4E00\u6B65\u9700\u8981\u53BB\u8BF7\u6C42\u540E\u7AEF\u63A5\u53E3\u5F97\u5230\u7528\u6237\u7684\u5E38\u7528\u5916\u5356\u5730\u5740\u3002\u7136\u540E\u518D\u53BB\u8BF7\u6C42\u5176\u4ED6\u63A5\u53E3\u3001\u6E32\u67D3\u9875\u9762\u3002\u5982\u679C\u4F7F\u7528\u4E86\u89C2\u5BDF\u8005\u6A21\u5F0F\u53EF\u80FD\u4F1A\u8FD9\u6837\u5199\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// \u9875\u9762\u91CC\u6709\u4E09\u4E2A\u6A21\u5757 A\uFF0CB\uFF0CC \u9700\u8981\u62FF\u5230\u5730\u5740\u540E\u518D\u8FDB\u884C\u4E0B\u4E00\u6B65\n// A\u3001B\u3001C \u4E09\u4E2A\u6A21\u5757\u90FD\u662F\u4E0D\u540C\u4EBA\u5199\u7684\uFF0C\u63D0\u4F9B\u4E86\u4E0D\u540C\u7684\u65B9\u6CD5\u4F9B\u6211\u4EEC\u8C03\u7528\nconst observers = []\n// \u6CE8\u518C\u89C2\u5BDF\u8005\nobservers.push(A.update)\nobservers.push(B.next)\nobervers.push(C.change)\n\n// getAddress \u5F02\u6B65\u8BF7\u6C42\ngetAddress().then((res) => {\n  const address = res.address\n  observers.forEach(update => update(address))\n})\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"getAddress"})," \u6A21\u5757\u548C\u5176\u4ED6 ",(0,r.jsx)(e.code,{children:"A"})," \u3001",(0,r.jsx)(e.code,{children:"B"}),"\u3001",(0,r.jsx)(e.code,{children:"C"})," \u4E09\u4E2A\u6A21\u5757\u5DF2\u7ECF\u5B9E\u73B0\u4E86\u89E3\u8026\uFF0C\u4F46\u4ECD\u9700\u8981\u7EF4\u62A4 ",(0,r.jsx)(e.code,{children:"observers"})," \u8FD9\u4E2A\u6570\u7EC4\u6765\u6CE8\u518C\u89C2\u5BDF\u8005\uFF0C\u540C\u65F6\u8FD8\u9700\u8981\u77E5\u9053\u5404\u4E2A\u6A21\u5757\u63D0\u4F9B\u4E86\u4EC0\u4E48\u65B9\u6CD5\u7528\u4E8E\u56DE\u8C03\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F\uFF0C\u8BA9 ",(0,r.jsx)(e.code,{children:"getAddress"})," \u6A21\u5757\u548C\u5176\u4ED6 ",(0,r.jsx)(e.code,{children:"A"})," \u3001",(0,r.jsx)(e.code,{children:"B"}),"\u3001",(0,r.jsx)(e.code,{children:"C"})," \u4E09\u4E2A\u6A21\u5757\u89E3\u8026\u7684\u66F4\u52A0\u5F7B\u5E95\u3002"]}),"\n",(0,r.jsxs)(e.h1,{id:"\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F",children:["\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"\u56DE\u5FC6\u4E00\u4E0B\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF1A"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["The ",(0,r.jsx)(e.strong,{children:"observer pattern"})," is a ",(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Software_design_pattern",target:"_blank",rel:"noopener noreferrer",children:"software design pattern"})," in which an ",(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Object_(computer_science)#Objects_in_object-oriented_programming",target:"_blank",rel:"noopener noreferrer",children:"object"}),", named the ",(0,r.jsx)(e.strong,{children:"subject"}),", maintains a list of its dependents, called ",(0,r.jsx)(e.strong,{children:"observers"}),", and notifies them automatically of any state changes, usually by calling one of their ",(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Method_(computer_science)",target:"_blank",rel:"noopener noreferrer",children:"methods"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u89C2\u5BDF\u8005\u6A21\u5F0F\u4E2D\uFF0C",(0,r.jsx)(e.code,{children:"Subject"})," \u81EA\u5DF1\u7EF4\u62A4\u89C2\u5BDF\u8005\u5217\u8868\u8FDB\u884C\u6CE8\u518C\u548C\u901A\u77E5\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://nakoruru.h7ml.cn/httpproxy/static.5ibug.net/vitepress/assets/images/designPattern/windliangblog.oss-cn-beijing.aliyuncs.comimage-20220130170413954.png",alt:"image-20220130170413954"})}),"\n",(0,r.jsxs)(e.p,{children:["\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F\u7684\u8BDD\uFF0C\u5F15\u5165\u4E00\u4E2A\u4E2D\u95F4\u5E73\u53F0\u8FDB\u884C\u6CE8\u518C\u548C\u901A\u77E5\uFF0C\u76F8\u5F53\u4E8E\u4ECE ",(0,r.jsx)(e.code,{children:"Subject"})," \u4E2D\u89E3\u8026\u51FA\u6765\u3002"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:"https://nakoruru.h7ml.cn/httpproxy/static.5ibug.net/vitepress/assets/images/designPattern/windliangblog.oss-cn-beijing.aliyuncs.comimage-20220130171806687.png",alt:"image-20220130171806687"})}),"\n",(0,r.jsxs)(e.p,{children:["\u89C2\u5BDF\u8005\u901A\u8FC7 ",(0,r.jsx)(e.code,{children:"on"})," \u5411 ",(0,r.jsx)(e.code,{children:"EventBus"})," \u6CE8\u518C\u4E8B\u4EF6\uFF0C\u7136\u540E ",(0,r.jsx)(e.code,{children:"Subject"})," \u901A\u8FC7 ",(0,r.jsx)(e.code,{children:"emit"})," \u5411 ",(0,r.jsx)(e.code,{children:"EventBus"})," \u53D1\u5C04\u4E8B\u4EF6\uFF0C\u7531 ",(0,r.jsx)(e.code,{children:"EventBus"})," \u6765\u5411\u89C2\u5BDF\u8005\u66F4\u65B0\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u63A5\u4E0B\u6765\u5B9E\u73B0\u4E00\u4E2A\u7B80\u5355\u7684 ",(0,r.jsx)(e.code,{children:"EventBus"})," \u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// event.js\nconst observersMap = {}\nconst listen = function (key, fn) {\n  if (!observersMap[key])\n    observersMap[key] = []\n\n  observersMap[key].push(fn)\n}\nconst trigger = function () {\n  const key = Array.prototype.shift.call(arguments)\n  const fns = observersMap[key]\n  if (!fns || fns.length === 0)\n    return false\n\n  for (let i = 0, fn; (fn = fns[i]); i++)\n    fn.apply(this, arguments)\n}\nconst remove = function (key, fn) {\n  const fns = observersMap[key]\n  if (!fns)\n    return false\n\n  if (!fn) {\n    fns && (fns.length = 0) // \u5168\u90E8\u6E05\u7A7A\n  }\n  else {\n    let findIndex = -1\n    for (let i = 0; i < fns.length; i++) {\n      if (fns[i] === fn) {\n        findIndex = i\n        break\n      }\n    }\n    if (findIndex !== -1)\n      fns.splice(findIndex, 1)\n  }\n}\n\n// \u540C\u4E00\u79CD\u529F\u80FD\u53EF\u80FD\u4F1A\u89C1\u5230\u4E0D\u540C\u540D\u5B57\uFF0C\u8FD9\u91CC\u90FD\u5BFC\u51FA\u53BB\nexport const EventBus = {\n  listen,\n  attach: listen,\n  on: listen,\n\n  remove,\n  detach: remove,\n\n  trigger,\n  emit: trigger,\n}\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u6211\u4EEC\u901A\u8FC7 ",(0,r.jsx)(e.code,{children:"observersMap"})," \u5C06\u4E0D\u540C\u7684\u4E8B\u4EF6\u4FDD\u5B58\u4E3A\u4E0D\u540C\u7684\u6570\u7EC4\uFF0C",(0,r.jsx)(e.code,{children:"emit"})," \u7684\u65F6\u5019\u5F97\u5230\u5BF9\u5E94\u7684\u6570\u7EC4\u53BB\u8C03\u7528\u5373\u53EF\u3002\u770B\u4E0B\u4F8B\u5B50\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import { EventBus } from './event.js'\n\nconst WindLiang = {\n  writePost(p) {\n    EventBus.emit('windliang', p)\n  },\n}\n\nconst XiaoMing = {\n  update(post) {\n    console.log(`\u6211\u6536\u5230\u4E86${post} \u5E76\u4E14\u70B9\u4E86\u4E2A\u8D5E`)\n  },\n}\n\nconst XiaoYang = {\n  update(post) {\n    console.log(`\u6211\u6536\u5230\u4E86${post} \u5E76\u4E14\u8F6C\u53D1\u4E86`)\n  },\n}\n\nconst XiaoGang = {\n  update(post) {\n    console.log(`\u6211\u6536\u5230\u4E86${post} \u5E76\u4E14\u6536\u85CF`)\n  },\n}\n\nEventBus.on('windliang', XiaoMing.update)\nEventBus.on('windliang', XiaoYang.update)\nEventBus.on('windliang', XiaoGang.update)\n\nWindLiang.writePost('\u65B0\u6587\u7AE0-\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0Cbalabala')\n"})}),"\n",(0,r.jsxs)(e.h1,{id:"\u4EE3\u7801\u5B9E\u73B0",children:["\u4EE3\u7801\u5B9E\u73B0",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4EE3\u7801\u5B9E\u73B0",children:"#"})]}),"\n",(0,r.jsx)(e.p,{children:"\u8BA9\u6211\u4EEC\u6539\u9020\u4E0B\u5F00\u5934\u5199\u7684\u89C2\u5BDF\u8005\u6A21\u5F0F\u7684\u4EE3\u7801\uFF1A"}),"\n",(0,r.jsx)(e.p,{children:"\u5730\u5740\u6A21\u5757\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import { EventBus } from './event.js'\n\n// getAddress \u5F02\u6B65\u8BF7\u6C42\ngetAddress().then((res) => {\n  const address = res.address\n  EventBus.emit('ADDRESS', address)\n})\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"A"})," \u6A21\u5757"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import { EventBus } from './event.js'\n\nfunction update(address) {\n  // \u81EA\u5DF1\u7684\u903B\u8F91\n}\n\nEventBus.on('ADDRESS', address => update(address))\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"B"})," \u6A21\u5757"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import { EventBus } from './event.js'\n\nfunction next(address) {\n  // \u81EA\u5DF1\u7684\u903B\u8F91\n}\n\nEventBus.on('ADDRESS', address => next(address))\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"C"})," \u6A21\u5757"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import { EventBus } from './event.js'\n\nfunction change(address) {\n  // \u81EA\u5DF1\u7684\u903B\u8F91\n}\n\nEventBus.on('ADDRESS', address => change(address))\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u53EF\u4EE5\u770B\u5230 ",(0,r.jsx)(e.code,{children:"getAddress"})," \u6A21\u5757\u4E0D\u518D\u9700\u8981\u5173\u5FC3\u89C2\u5BDF\u8005\u6709\u8C01\uFF0C\u5B83\u53EA\u9700\u8981\u5411 ",(0,r.jsx)(e.code,{children:"EventBus"})," \u53D1\u5C04\u66F4\u65B0\u4E8B\u4EF6\u5373\u53EF\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u6BCF\u4E2A\u6A21\u5757\u5185\u90E8\u81EA\u5DF1\u5982\u679C\u9700\u8981\u5730\u5740\u4FE1\u606F\uFF0C\u53EA\u9700\u8981\u8BA2\u9605\u76F8\u5173\u4E8B\u4EF6\uFF0C\u7136\u540E\u4F20\u5165\u56DE\u8C03\u51FD\u6570\u5373\u53EF\u3002"}),"\n",(0,r.jsxs)(e.h1,{id:"\u7279\u6B8A\u60C5\u51B5",children:["\u7279\u6B8A\u60C5\u51B5",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7279\u6B8A\u60C5\u51B5",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u5B9E\u9645\u5DE5\u7A0B\u4E2D\u53EF\u80FD\u9047\u5230\u4E00\u4E9B\u7279\u6B8A\u573A\u666F\uFF0C\u7531\u4E8E ",(0,r.jsx)(e.code,{children:"emit"})," \u4E00\u822C\u5728\u4E00\u4E2A\u5F02\u6B65\u4E8B\u4EF6\u4E2D\u6267\u884C\uFF0C\u5982\u679C\u8FD9\u4E2A\u5F02\u6B65\u4E8B\u4EF6\u7A81\u7136\u6267\u884C\u7684\u53D8\u5FEB\u4E86\uFF0C\u5C31\u53EF\u80FD\u9020\u6210\u67D0\u4E2A\u4E8B\u4EF6\u5148 ",(0,r.jsx)(e.code,{children:"emit"})," \u4E86\uFF0C\u7136\u540E\u67D0\u4E2A\u6A21\u5757\u624D\u8FDB\u884C\u4E86 ",(0,r.jsx)(e.code,{children:"on"})," \u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6B64\u65F6\u6211\u4EEC\u53EF\u4EE5\u5BF9 ",(0,r.jsx)(e.code,{children:"EventBus"})," \u8FDB\u884C\u4E00\u5B9A\u7684\u6539\u5199\uFF0C\u4F7F\u5F97\u5148\u8BA2\u9605\u4E8B\u4EF6\uFF0C\u540E\u89E6\u53D1\u4E8B\u4EF6\u6210\u4E3A\u53EF\u80FD\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4E3A\u4E86\u4E0D\u6539\u52A8\u539F\u6709\u903B\u8F91\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7 ",(0,r.jsx)(e.a,{href:"https://www.h7ml.cn/posts/designPattern/proxy.html",target:"_blank",rel:"noopener noreferrer",children:"\u4EE3\u7406\u6A21\u5F0F"})," \u8FDB\u884C\u6539\u5199\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"// eventProxy.js\n\nimport { EventBus as EventBusOriginal } from './event.js'\n\nlet offlineStack = [] // listen \u4E4B\u524D\u7684 emit \u4E8B\u4EF6\u8FDB\u884C\u7F13\u5B58\n\nconst triggerProxy = function () {\n  const _self = this\n  const args = arguments\n  const fn = function () {\n    return EventBusOriginal.trigger.apply(_self, args)\n  }\n  if (offlineStack)\n    return offlineStack.push(fn)\n\n  return fn()\n}\nconst listenProxy = function (key, fn) {\n  EventBusOriginal.listen(key, fn)\n  if (!offlineStack)\n    return\n\n  for (let i = 0, fn; (fn = offlineStack[i]); i++)\n    fn()\n\n  offlineStack = null\n}\n\nconst listen = listenProxy || EventBus.listen\nconst trigger = triggerProxy || EventBus.trigger\n\nexport const EventBus = {\n  ...EventBusOriginal,\n  listen,\n  attach: listen,\n  on: listen,\n\n  trigger,\n  emit: trigger,\n}\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u5728 ",(0,r.jsx)(e.code,{children:"trigger"})," \u7684\u65F6\u5019\uFF0C\u5982\u679C ",(0,r.jsx)(e.code,{children:"offlineStack"})," \u4E0D\u4E3A ",(0,r.jsx)(e.code,{children:"null"}),"\uFF0C\u8BF4\u660E\u8FD8\u6CA1\u6709\u8C03\u7528\u8FC7 ",(0,r.jsx)(e.code,{children:"listen"}),"\uFF0C\u6B64\u65F6\u5C06\u5F53\u524D\u4E8B\u4EF6\u4FDD\u5B58\u8D77\u6765\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"listen"})," \u7684\u65F6\u5019\u904D\u5386\u4E4B\u524D\u4FDD\u5B58\u7684\u4E8B\u4EF6\uFF0C\u5E76\u4E14\u5C06 ",(0,r.jsx)(e.code,{children:"offlineStack"})," \u7F6E\u4E3A ",(0,r.jsx)(e.code,{children:"null"}),"\uFF0C\u8868\u793A\u5DF2\u7ECF\u8C03\u7528\u8FC7 ",(0,r.jsx)(e.code,{children:"listen"})," \u4E86\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u770B\u4E00\u4E0B\u6548\u679C\uFF1A"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"import { EventBus } from './eventProxy.mjs'\n\nconst WindLiang = {\n  writePost(p) {\n    EventBus.emit('windliang', p)\n  },\n}\n\nconst XiaoMing = {\n  update(post) {\n    console.log(`\u6211\u6536\u5230\u4E86${post} \u5E76\u4E14\u70B9\u4E86\u4E2A\u8D5E`)\n  },\n}\n\nconst XiaoYang = {\n  update(post) {\n    console.log(`\u6211\u6536\u5230\u4E86${post} \u5E76\u4E14\u8F6C\u53D1\u4E86`)\n  },\n}\n\nconst XiaoGang = {\n  update(post) {\n    console.log(`\u6211\u6536\u5230\u4E86${post} \u5E76\u4E14\u6536\u85CF`)\n  },\n}\n\nWindLiang.writePost('\u65B0\u6587\u7AE0-\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0Cbalabala')\n\nEventBus.on('windliang', XiaoYang.update) // \u6211\u6536\u5230\u4E86\u65B0\u6587\u7AE0-\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0Cbalabala \u5E76\u4E14\u8F6C\u53D1\u4E86\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u867D\u7136\u662F\u5148\u8FDB\u884C\u7684 ",(0,r.jsx)(e.code,{children:"emit"})," \u540E\u8FDB\u884C\u7684 ",(0,r.jsx)(e.code,{children:"on"})," \u7684\uFF0C\u4F46\u4F9D\u65E7\u4F1A\u6B63\u5E38\u6267\u884C\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u4E0A\u8FB9\u7684\u89E3\u51B3\u65B9\u6848\u5F88\u7C97\u7565\uFF0C\u53EA\u9002\u7528\u4E8E\u6709\u4E00\u4E2A\u4E8B\u4EF6\u5E76\u4E14\u53EA\u6709\u4E00\u4E2A ",(0,r.jsx)(e.code,{children:"on"})," \u7684\u573A\u666F\uFF0C\u4E0D\u7136\u7684\u8BDD\u6BD4\u5982\u4E0B\u8FB9\u7684\u60C5\u51B5\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"WindLiang.writePost('\u65B0\u6587\u7AE0-\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0Cbalabala')\n\nEventBus.on('windliang', XiaoMing.update)\nEventBus.on('windliang', XiaoYang.update)\nEventBus.on('windliang', XiaoGang.update)\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u53EA\u6709 ",(0,r.jsx)(e.code,{children:"XiaoMing.update"})," \u4F1A\u6267\u884C\uFF0C\u540E\u8FB9\u4E24\u53E5\u5C31\u4F1A\u9519\u8FC7\u7B2C\u4E00\u6B21\u7684 ",(0,r.jsx)(e.code,{children:"emit"})," \uFF0C\u56E0\u4E3A\u6267\u884C\u4E00\u6B21 ",(0,r.jsx)(e.code,{children:"listen"})," \u5C31\u628A\u7F13\u5B58\u6E05\u7A7A\u4E86\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u6216\u8005\u5728 ",(0,r.jsx)(e.code,{children:"writePost"})," \u4E4B\u524D\u6709\u4E86\u4E00\u6B21 ",(0,r.jsx)(e.code,{children:"on"})," \u4E86\uFF1A"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-js",children:"EventBus.on('windliang', XiaoMing.update)\nWindLiang.writePost('\u65B0\u6587\u7AE0-\u89C2\u5BDF\u8005\u6A21\u5F0F\uFF0Cbalabala')\n\nEventBus.on('windliang', XiaoYang.update)\nEventBus.on('windliang', XiaoGang.update)\n"})}),"\n",(0,r.jsxs)(e.p,{children:["\u540C\u6837\u53EA\u6709 ",(0,r.jsx)(e.code,{children:"XiaoMing.update"})," \u4F1A\u6267\u884C\uFF0C\u540E\u8FB9\u4E24\u53E5\u5C31\u4F1A\u9519\u8FC7\u7B2C\u4E00\u6B21\u7684 ",(0,r.jsx)(e.code,{children:"emit"})," \u4E86\uFF0C\u56E0\u4E3A\u6267\u884C\u4E00\u6B21 ",(0,r.jsx)(e.code,{children:"listen"})," \u5C31\u628A\u7F13\u5B58\u6E05\u7A7A\u4E86\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u5BF9\u4E8E\u5B9E\u9645\u573A\u666F\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u6839\u636E\u60C5\u51B5\u7EE7\u7EED\u8FDB\u884C\u8C03\u6574\u3002"}),"\n",(0,r.jsxs)(e.h1,{id:"\u603B",children:["\u603B",(0,r.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#\u603B",children:"#"})]}),"\n",(0,r.jsxs)(e.p,{children:["\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F\u76F8\u5BF9\u4E8E\u6700\u539F\u59CB\u7684\u89C2\u5BDF\u8005\u6A21\u5F0F\u5C06 ",(0,r.jsx)(e.code,{children:"Subject"})," \u548C ",(0,r.jsx)(e.code,{children:"Observers"})," \u8FDB\u884C\u4E86\u5F7B\u5E95\u89E3\u8026\uFF0C",(0,r.jsx)(e.code,{children:"Subject"})," \u4E0D\u518D\u9700\u8981\u5173\u5FC3\u8C01\u8BA2\u9605\u4E86\u5B83\uFF0C",(0,r.jsx)(e.code,{children:"Observer"})," \u53EA\u9700\u8981\u5728\u81EA\u5DF1\u5185\u90E8\u8BA2\u9605\u5B83\u6240\u5173\u5FC3\u7684\u4E8B\u4EF6\u5373\u53EF\u3002"]}),"\n",(0,r.jsxs)(e.p,{children:["\u901A\u8FC7\u5C01\u88C5\u597D\u7684 ",(0,r.jsx)(e.code,{children:"EventBus"})," \u4E5F\u5B9E\u73B0\u4E86\u66F4\u597D\u7684\u590D\u7528\uFF0C\u4E0D\u9700\u8981\u6BCF\u4E2A\u6A21\u5757\u90FD\u53BB\u7EF4\u62A4\u81EA\u5DF1\u7684\u89C2\u5BDF\u8005\u5217\u8868\u3002"]}),"\n",(0,r.jsx)(e.p,{children:"\u4F46\u540C\u65F6\u4E5F\u5E26\u6765\u4E86\u574F\u5904\uFF0C\u6240\u6709\u7684\u4E8B\u4EF6\u8BA2\u9605\u5206\u6563\u5728\u5404\u4E2A\u6A21\u5757\uFF0C\u6CA1\u6709\u4E00\u4E2A\u5168\u5C40\u89C6\u89D2\u77E5\u9053\u67D0\u4E2A\u4E8B\u4EF6\u88AB\u54EA\u4E9B\u6A21\u5757\u8BA2\u9605\u4E86\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u7A0B\u5E8F\u96BE\u4EE5\u7406\u89E3\u548C\u8C03\u8BD5\u3002"})]})}function o(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),n.components);return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(t,{...n})}):t(n)}e.default=o,o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["posts%2FdesignPattern%2FpublishSubscribe.md"]={toc:[],title:"\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F",frontmatter:{title:"\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F",category:["\u8BBE\u8BA1\u6A21\u5F0F","frontend"],author:"h7ml",image:"https://www.h7ml.cn/logo.png",banner:"https://www.h7ml.cn/logo.png",tag:["\u8BBE\u8BA1\u6A21\u5F0F","frontend"],date:"2022-01-30T11:04:52.000Z"}}}}]);