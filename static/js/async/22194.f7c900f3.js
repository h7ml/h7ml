/*! For license information please see 22194.f7c900f3.js.LICENSE.txt */
(self.webpackChunkh7ml=self.webpackChunkh7ml||[]).push([["22194"],{15958:function(e,n,t){"use strict";t.r(n);var a=t("52676"),s=t("40453");function r(e){let n=Object.assign({h1:"h1",a:"a",p:"p",img:"img",h2:"h2",code:"code",ul:"ul",li:"li",pre:"pre"},(0,s.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h1,{id:"\u8BF4\u8BF4\u4F60\u5BF9-immutable-\u7684\u7406\u89E3\u5982\u4F55\u5E94\u7528\u5728-react-\u9879\u76EE\u4E2D",children:["\u8BF4\u8BF4\u4F60\u5BF9 immutable \u7684\u7406\u89E3\uFF1F\u5982\u4F55\u5E94\u7528\u5728 react \u9879\u76EE\u4E2D\uFF1F",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8BF4\u8BF4\u4F60\u5BF9-immutable-\u7684\u7406\u89E3\u5982\u4F55\u5E94\u7528\u5728-react-\u9879\u76EE\u4E2D",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://nakoruru.h7ml.cn/httpproxy/static.5ibug.net/vitepress/assets/images/interview/797e9470-ea3f-11eb-ab90-d9ae814b240d.png",alt:""})}),"\n",(0,a.jsxs)(n.h2,{id:"\u4E00\u662F\u4EC0\u4E48",children:["\u4E00\u3001\u662F\u4EC0\u4E48",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E00\u662F\u4EC0\u4E48",children:"#"})]}),"\n",(0,a.jsx)(n.p,{children:"Immutable\uFF0C\u4E0D\u53EF\u6539\u53D8\u7684\uFF0C\u5728\u8BA1\u7B97\u673A\u4E2D\uFF0C\u5373\u6307\u4E00\u65E6\u521B\u5EFA\uFF0C\u5C31\u4E0D\u80FD\u518D\u88AB\u66F4\u6539\u7684\u6570\u636E"}),"\n",(0,a.jsxs)(n.p,{children:["\u5BF9 ",(0,a.jsx)(n.code,{children:"Immutable"}),"\u5BF9\u8C61\u7684\u4EFB\u4F55\u4FEE\u6539\u6216\u6DFB\u52A0\u5220\u9664\u64CD\u4F5C\u90FD\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684 ",(0,a.jsx)(n.code,{children:"Immutable"}),"\u5BF9\u8C61"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Immutable"})," \u5B9E\u73B0\u7684\u539F\u7406\u662F ",(0,a.jsx)(n.code,{children:"Persistent Data Structure"}),"\uFF08\u6301\u4E45\u5316\u6570\u636E\u7ED3\u6784\uFF09:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u7528\u4E00\u79CD\u6570\u636E\u7ED3\u6784\u6765\u4FDD\u5B58\u6570\u636E"}),"\n",(0,a.jsx)(n.li,{children:"\u5F53\u6570\u636E\u88AB\u4FEE\u6539\u65F6\uFF0C\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F46\u662F\u65B0\u7684\u5BF9\u8C61\u4F1A\u5C3D\u53EF\u80FD\u7684\u5229\u7528\u4E4B\u524D\u7684\u6570\u636E\u7ED3\u6784\u800C\u4E0D\u4F1A\u5BF9\u5185\u5B58\u9020\u6210\u6D6A\u8D39"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\u4E5F\u5C31\u662F\u4F7F\u7528\u65E7\u6570\u636E\u521B\u5EFA\u65B0\u6570\u636E\u65F6\uFF0C\u8981\u4FDD\u8BC1\u65E7\u6570\u636E\u540C\u65F6\u53EF\u7528\u4E14\u4E0D\u53D8\uFF0C\u540C\u65F6\u4E3A\u4E86\u907F\u514D ",(0,a.jsx)(n.code,{children:"deepCopy"}),"\u628A\u6240\u6709\u8282\u70B9\u90FD\u590D\u5236\u4E00\u904D\u5E26\u6765\u7684\u6027\u80FD\u635F\u8017\uFF0C",(0,a.jsx)(n.code,{children:"Immutable"})," \u4F7F\u7528\u4E86 ",(0,a.jsx)(n.code,{children:"Structural Sharing"}),"\uFF08\u7ED3\u6784\u5171\u4EAB\uFF09"]}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679C\u5BF9\u8C61\u6811\u4E2D\u4E00\u4E2A\u8282\u70B9\u53D1\u751F\u53D8\u5316\uFF0C\u53EA\u4FEE\u6539\u8FD9\u4E2A\u8282\u70B9\u548C\u53D7\u5B83\u5F71\u54CD\u7684\u7236\u8282\u70B9\uFF0C\u5176\u5B83\u8282\u70B9\u5219\u8FDB\u884C\u5171\u4EAB"}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u4E0B\u56FE\u6240\u793A\uFF1A"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://pic4.zhimg.com/80/2b4c801a7b40eefcd4ee6767fb984fdf_720w.gif",alt:""})}),"\n",(0,a.jsxs)(n.h2,{id:"\u4E8C\u5982\u4F55\u4F7F\u7528",children:["\u4E8C\u3001\u5982\u4F55\u4F7F\u7528",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E8C\u5982\u4F55\u4F7F\u7528",children:"#"})]}),"\n",(0,a.jsxs)(n.p,{children:["\u4F7F\u7528",(0,a.jsx)(n.code,{children:"Immutable"}),"\u5BF9\u8C61\u6700\u4E3B\u8981\u7684\u5E93\u662F",(0,a.jsx)(n.code,{children:"immutable.js"})]}),"\n",(0,a.jsx)(n.p,{children:"immutable.js \u662F\u4E00\u4E2A\u5B8C\u5168\u72EC\u7ACB\u7684\u5E93\uFF0C\u65E0\u8BBA\u57FA\u4E8E\u4EC0\u4E48\u6846\u67B6\u90FD\u53EF\u4EE5\u7528\u5B83"}),"\n",(0,a.jsx)(n.p,{children:"\u5176\u51FA\u73B0\u573A\u666F\u5728\u4E8E\u5F25\u8865 Javascript \u6CA1\u6709\u4E0D\u53EF\u53D8\u6570\u636E\u7ED3\u6784\u7684\u95EE\u9898\uFF0C\u901A\u8FC7 structural sharing \u6765\u89E3\u51B3\u7684\u6027\u80FD\u95EE\u9898"}),"\n",(0,a.jsxs)(n.p,{children:["\u5185\u90E8\u63D0\u4F9B\u4E86\u4E00\u5957\u5B8C\u6574\u7684 Persistent Data Structure\uFF0C\u8FD8\u6709\u5F88\u591A\u6613\u7528\u7684\u6570\u636E\u7C7B\u578B\uFF0C\u5982",(0,a.jsx)(n.code,{children:"Collection"}),"\u3001",(0,a.jsx)(n.code,{children:"List"}),"\u3001",(0,a.jsx)(n.code,{children:"Map"}),"\u3001",(0,a.jsx)(n.code,{children:"Set"}),"\u3001",(0,a.jsx)(n.code,{children:"Record"}),"\u3001",(0,a.jsx)(n.code,{children:"Seq"}),"\uFF0C\u5176\u4E2D\uFF1A"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"List: \u6709\u5E8F\u7D22\u5F15\u96C6\uFF0C\u7C7B\u4F3C JavaScript \u4E2D\u7684 Array"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Map: \u65E0\u5E8F\u7D22\u5F15\u96C6\uFF0C\u7C7B\u4F3C JavaScript \u4E2D\u7684 Object"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Set: \u6CA1\u6709\u91CD\u590D\u503C\u7684\u96C6\u5408"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u4E3B\u8981\u7684\u65B9\u6CD5\u5982\u4E0B\uFF1A"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"fromJS()\uFF1A\u5C06\u4E00\u4E2A js \u6570\u636E\u8F6C\u6362\u4E3A Immutable \u7C7B\u578B\u7684\u6570\u636E"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const obj = Immutable.fromJS({ a: '123', b: '234' })\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"toJS()\uFF1A\u5C06\u4E00\u4E2A Immutable \u6570\u636E\u8F6C\u6362\u4E3A JS \u7C7B\u578B\u7684\u6570\u636E"}),"\n",(0,a.jsx)(n.li,{children:"is()\uFF1A\u5BF9\u4E24\u4E2A\u5BF9\u8C61\u8FDB\u884C\u6BD4\u8F83"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { Map, is } from 'immutable'\nconst map1 = Map({ a: 1, b: 1, c: 1 })\nconst map2 = Map({ a: 1, b: 1, c: 1 })\nmap1 === map2 // false\nObject.is(map1, map2) // false\nis(map1, map2) // true\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"get(key)\uFF1A\u5BF9\u6570\u636E\u6216\u5BF9\u8C61\u53D6\u503C"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"getIn([]) \uFF1A\u5BF9\u5D4C\u5957\u5BF9\u8C61\u6216\u6570\u7EC4\u53D6\u503C\uFF0C\u4F20\u53C2\u4E3A\u6570\u7EC4\uFF0C\u8868\u793A\u4F4D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const abs = Immutable.fromJS({ a: { b: 2 } })\nabs.getIn(['a', 'b']) // 2\nabs.getIn(['a', 'c']) // \u5B50\u7EA7\u6CA1\u6709\u503C\n\nconst arr = Immutable.fromJS([1, 2, 3, { a: 5 }])\narr.getIn([3, 'a']) // 5\narr.getIn([3, 'c']) // \u5B50\u7EA7\u6CA1\u6709\u503C\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u4E0B\u4F8B\u5B50\uFF1A\u4F7F\u7528\u65B9\u6CD5\u5982\u4E0B\uFF1A"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import Immutable from 'immutable'\nfoo = Immutable.fromJS({ a: { b: 1 } })\nbar = foo.setIn(['a', 'b'], 2) // \u4F7F\u7528 setIn \u8D4B\u503C\nconsole.log(foo.getIn(['a', 'b'])) // \u4F7F\u7528 getIn \u53D6\u503C\uFF0C\u6253\u5370 1\nconsole.log(foo === bar) //  \u6253\u5370 false\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u679C\u6362\u5230\u539F\u751F\u7684",(0,a.jsx)(n.code,{children:"js"}),"\uFF0C\u5219\u5BF9\u5E94\u5982\u4E0B\uFF1A"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const foo = { a: { b: 1 } }\nconst bar = foo\nbar.a.b = 2\nconsole.log(foo.a.b) // \u6253\u5370 2\nconsole.log(foo === bar) //  \u6253\u5370 true\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"\u4E09\u5728-react-\u4E2D\u5E94\u7528",children:["\u4E09\u3001\u5728 React \u4E2D\u5E94\u7528",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E09\u5728-react-\u4E2D\u5E94\u7528",children:"#"})]}),"\n",(0,a.jsxs)(n.p,{children:["\u4F7F\u7528 ",(0,a.jsx)(n.code,{children:"Immutable"}),"\u53EF\u4EE5\u7ED9 ",(0,a.jsx)(n.code,{children:"React"})," \u5E94\u7528\u5E26\u6765\u6027\u80FD\u7684\u4F18\u5316\uFF0C\u4E3B\u8981\u4F53\u73B0\u5728\u51CF\u5C11\u6E32\u67D3\u7684\u6B21\u6570"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5728\u505A",(0,a.jsx)(n.code,{children:"react"}),"\u6027\u80FD\u4F18\u5316\u7684\u65F6\u5019\uFF0C\u4E3A\u4E86\u907F\u514D\u91CD\u590D\u6E32\u67D3\uFF0C\u6211\u4EEC\u4F1A\u5728",(0,a.jsx)(n.code,{children:"shouldComponentUpdate()"}),"\u4E2D\u505A\u5BF9\u6BD4\uFF0C\u5F53\u8FD4\u56DE",(0,a.jsx)(n.code,{children:"true"}),"\u6267\u884C",(0,a.jsx)(n.code,{children:"render"}),"\u65B9\u6CD5"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"Immutable"}),"\u901A\u8FC7",(0,a.jsx)(n.code,{children:"is"}),"\u65B9\u6CD5\u5219\u53EF\u4EE5\u5B8C\u6210\u5BF9\u6BD4\uFF0C\u800C\u65E0\u9700\u50CF\u4E00\u6837\u901A\u8FC7\u6DF1\u5EA6\u6BD4\u8F83\u7684\u65B9\u5F0F\u6BD4\u8F83"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5728\u4F7F\u7528",(0,a.jsx)(n.code,{children:"redux"}),"\u8FC7\u7A0B\u4E2D\u4E5F\u53EF\u4EE5\u7ED3\u5408",(0,a.jsx)(n.code,{children:"Immutable"}),"\uFF0C\u4E0D\u4F7F\u7528",(0,a.jsx)(n.code,{children:"Immutable"}),"\u524D\u4FEE\u6539\u4E00\u4E2A\u6570\u636E\u9700\u8981\u505A\u4E00\u4E2A\u6DF1\u62F7\u8D1D"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import '_' from 'lodash';\n\nconst Component = React.createClass({\n  getInitialState() {\n    return {\n      data: { times: 0 }\n    }\n  },\n  handleAdd() {\n    let data = _.cloneDeep(this.state.data);\n    data.times = data.times + 1;\n    this.setState({ data: data });\n  }\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4F7F\u7528 Immutable \u540E\uFF1A"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"getInitialState() {\n  return {\n    data: Map({ times: 0 })\n  }\n},\n  handleAdd() {\n    this.setState({ data: this.state.data.update('times', v => v + 1) });\n    // \u8FD9\u65F6\u7684 times \u5E76\u4E0D\u4F1A\u6539\u53D8\n    console.log(this.state.data.get('times'));\n  }\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u540C\u7406\uFF0C\u5728",(0,a.jsx)(n.code,{children:"redux"}),"\u4E2D\u4E5F\u53EF\u4EE5\u5C06\u6570\u636E\u8FDB\u884C",(0,a.jsx)(n.code,{children:"fromJS"}),"\u5904\u7406"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { fromJS } from 'immutable'\nimport * as constants from './constants'\nconst defaultState = fromJS({\n  // \u5C06\u6570\u636E\u8F6C\u5316\u6210immutable\u6570\u636E\n  home: true,\n  focused: false,\n  mouseIn: false,\n  list: [],\n  page: 1,\n  totalPage: 1,\n})\nexport default (state = defaultState, action) => {\n  switch (action.type) {\n    case constants.SEARCH_FOCUS:\n      return state.set('focused', true) // \u66F4\u6539immutable\u6570\u636E\n    case constants.CHANGE_HOME_ACTIVE:\n      return state.set('home', action.value)\n    case constants.SEARCH_BLUR:\n      return state.set('focused', false)\n    case constants.CHANGE_LIST:\n      // return state.set('list',action.data).set('totalPage',action.totalPage)\n      // merge\u6548\u7387\u66F4\u9AD8\uFF0C\u6267\u884C\u4E00\u6B21\u6539\u53D8\u591A\u4E2A\u6570\u636E\n      return state.merge({\n        list: action.data,\n        totalPage: action.totalPage,\n      })\n    case constants.MOUSE_ENTER:\n      return state.set('mouseIn', true)\n    case constants.MOUSE_LEAVE:\n      return state.set('mouseIn', false)\n    case constants.CHANGE_PAGE:\n      return state.set('page', action.page)\n    default:\n      return state\n  }\n}\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"\u53C2\u8003\u6587\u732E",children:["\u53C2\u8003\u6587\u732E",(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u8003\u6587\u732E",children:"#"})]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/20295971?spm=a2c4e.11153940.blogcont69516.18.4f275a00EzBHjr&columnSlug=purerender",target:"_blank",rel:"noopener noreferrer",children:"https://zhuanlan.zhihu.com/p/20295971?spm=a2c4e.11153940.blogcont69516.18.4f275a00EzBHjr&columnSlug=purerender"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.jianshu.com/p/7bf04638e82a",target:"_blank",rel:"noopener noreferrer",children:"https://www.jianshu.com/p/7bf04638e82a"})}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(r,{...e})}):r(e)}n.default=c,c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["interview%2FReact%2Fimmutable.md"]={toc:[{text:"\u4E00\u3001\u662F\u4EC0\u4E48",id:"\u4E00\u662F\u4EC0\u4E48",depth:2},{text:"\u4E8C\u3001\u5982\u4F55\u4F7F\u7528",id:"\u4E8C\u5982\u4F55\u4F7F\u7528",depth:2},{text:"\u4E09\u3001\u5728 React \u4E2D\u5E94\u7528",id:"\u4E09\u5728-react-\u4E2D\u5E94\u7528",depth:2},{text:"\u53C2\u8003\u6587\u732E",id:"\u53C2\u8003\u6587\u732E",depth:2}],title:"\u8BF4\u8BF4\u4F60\u5BF9 immutable \u7684\u7406\u89E3\uFF1F\u5982\u4F55\u5E94\u7528\u5728 react \u9879\u76EE\u4E2D\uFF1F",frontmatter:{icon:"question",description:"\u524D\u7AEF\u7269\u8BED|\u9762\u8BD5\u7269\u8BED-\u8BF4\u8BF4\u4F60\u5BF9 immutable \u7684\u7406\u89E3\uFF1F\u5982\u4F55\u5E94\u7528\u5728 react \u9879\u76EE\u4E2D\uFF1F",footer:"\u8BF4\u8BF4\u4F60\u5BF9 immutable \u7684\u7406\u89E3\uFF1F\u5982\u4F55\u5E94\u7528\u5728 react \u9879\u76EE\u4E2D\uFF1F",order:16,star:16,date:"2023-04-02T00:00:00.000Z",author:"h7ml",image:"https://www.h7ml.cn/logo.png",banner:"https://www.h7ml.cn/logo.png",category:["interview","React"],tag:["interview","React"],shortTitle:"\u524D\u7AEF\u7269\u8BED|\u9762\u8BD5\u7269\u8BED-\u8BF4\u8BF4\u4F60\u5BF9 immutable \u7684\u7406\u89E3\uFF1F\u5982\u4F55\u5E94\u7528\u5728 react \u9879\u76EE\u4E2D\uFF1F",isOriginal:!1,head:[["meta",{name:"keywords",content:"\u8BF4\u8BF4\u4F60\u5BF9 immutable \u7684\u7406\u89E3\uFF1F\u5982\u4F55\u5E94\u7528\u5728 react \u9879\u76EE\u4E2D\uFF1F"}]]}}}}]);