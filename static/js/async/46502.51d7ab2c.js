/*! For license information please see 46502.51d7ab2c.js.LICENSE.txt */
(self.webpackChunkh7ml=self.webpackChunkh7ml||[]).push([["46502"],{96540:function(e,n,t){"use strict";t.r(n);var r=t("52676"),o=t("40453");function s(e){let n=Object.assign({h1:"h1",a:"a",p:"p",img:"img",h2:"h2",code:"code",pre:"pre",ul:"ul",li:"li"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"vue-\u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B",children:["Vue \u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#vue-\u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://nakoruru.h7ml.cn/httpproxy/static.5ibug.net/vitepress/assets/images/interview/63194810-3a09-11eb-85f6-6fac77c0c9b3.png",alt:""})}),"\n",(0,r.jsxs)(n.h2,{id:"\u4E00\u601D\u8003",children:["\u4E00\u3001\u601D\u8003",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E00\u601D\u8003",children:"#"})]}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4EEC\u90FD\u542C\u8FC7\u77E5\u5176\u7136\u77E5\u5176\u6240\u4EE5\u7136\u8FD9\u53E5\u8BDD"}),"\n",(0,r.jsxs)(n.p,{children:["\u90A3\u4E48\u4E0D\u77E5\u9053\u5927\u5BB6\u662F\u5426\u601D\u8003\u8FC7",(0,r.jsx)(n.code,{children:"new Vue()"}),"\u8FD9\u4E2A\u8FC7\u7A0B\u4E2D\u7A76\u7ADF\u505A\u4E86\u4E9B\u4EC0\u4E48\uFF1F"]}),"\n",(0,r.jsx)(n.p,{children:"\u8FC7\u7A0B\u4E2D\u662F\u5982\u4F55\u5B8C\u6210\u6570\u636E\u7684\u7ED1\u5B9A\uFF0C\u53C8\u662F\u5982\u4F55\u5C06\u6570\u636E\u6E32\u67D3\u5230\u89C6\u56FE\u7684\u7B49\u7B49"}),"\n",(0,r.jsxs)(n.h2,{id:"\u4E00\u5206\u6790",children:["\u4E00\u3001\u5206\u6790",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E00\u5206\u6790",children:"#"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u9996\u5148\u627E\u5230",(0,r.jsx)(n.code,{children:"vue"}),"\u7684\u6784\u9020\u51FD\u6570"]}),"\n",(0,r.jsx)(n.p,{children:"\u6E90\u7801\u4F4D\u7F6E\uFF1Asrc\\core\\instance\\index.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function Vue(options) {\n  if (process.env.NODE_ENV !== 'production' && !(this instanceof Vue))\n    warn('Vue is a constructor and should be called with the `new` keyword')\n\n  this._init(options)\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"options"}),"\u662F\u7528\u6237\u4F20\u9012\u8FC7\u6765\u7684\u914D\u7F6E\u9879\uFF0C\u5982",(0,r.jsx)(n.code,{children:"data\u3001methods"}),"\u7B49\u5E38\u7528\u7684\u65B9\u6CD5"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"vue"}),"\u6784\u5EFA\u51FD\u6570\u8C03\u7528",(0,r.jsx)(n.code,{children:"_init"}),"\u65B9\u6CD5\uFF0C\u4F46\u6211\u4EEC\u53D1\u73B0\u672C\u6587\u4EF6\u4E2D\u5E76\u6CA1\u6709\u6B64\u65B9\u6CD5\uFF0C\u4F46\u4ED4\u7EC6\u53EF\u4EE5\u770B\u5230\u6587\u4EF6\u4E0B\u65B9\u5B9A\u5B9A\u4E49\u4E86\u5F88\u591A\u521D\u59CB\u5316\u65B9\u6CD5"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"initMixin(Vue) // \u5B9A\u4E49 _init\nstateMixin(Vue) // \u5B9A\u4E49 $set $get $delete $watch \u7B49\neventsMixin(Vue) // \u5B9A\u4E49\u4E8B\u4EF6  $on  $once $off $emit\nlifecycleMixin(Vue) // \u5B9A\u4E49 _update  $forceUpdate  $destroy\nrenderMixin(Vue) // \u5B9A\u4E49 _render \u8FD4\u56DE\u865A\u62DFdom\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u9996\u5148\u53EF\u4EE5\u770B",(0,r.jsx)(n.code,{children:"initMixin"}),"\u65B9\u6CD5\uFF0C\u53D1\u73B0\u8BE5\u65B9\u6CD5\u5728",(0,r.jsx)(n.code,{children:"Vue"}),"\u539F\u578B\u4E0A\u5B9A\u4E49\u4E86",(0,r.jsx)(n.code,{children:"_init"}),"\u65B9\u6CD5"]}),"\n",(0,r.jsx)(n.p,{children:"\u6E90\u7801\u4F4D\u7F6E\uFF1Asrc\\core\\instance\\init.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Vue.prototype._init = function (options?: Object) {\n  const vm: Component = this;\n  // a uid\n  vm._uid = uid++;\n  let startTag, endTag;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    startTag = `vue-perf-start:${vm._uid}`;\n    endTag = `vue-perf-end:${vm._uid}`;\n    mark(startTag);\n  }\n\n  // a flag to avoid this being observed\n  vm._isVue = true;\n  // merge options\n  // \u5408\u5E76\u5C5E\u6027\uFF0C\u5224\u65AD\u521D\u59CB\u5316\u7684\u662F\u5426\u662F\u7EC4\u4EF6\uFF0C\u8FD9\u91CC\u5408\u5E76\u4E3B\u8981\u662F mixins \u6216 extends \u7684\u65B9\u6CD5\n  if (options && options._isComponent) {\n    // optimize internal component instantiation\n    // since dynamic options merging is pretty slow, and none of the\n    // internal component options needs special treatment.\n    initInternalComponent(vm, options);\n  } else {\n    // \u5408\u5E76vue\u5C5E\u6027\n    vm.$options = mergeOptions(resolveConstructorOptions(vm.constructor), options || {}, vm);\n  }\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    // \u521D\u59CB\u5316proxy\u62E6\u622A\u5668\n    initProxy(vm);\n  } else {\n    vm._renderProxy = vm;\n  }\n  // expose real self\n  vm._self = vm;\n  // \u521D\u59CB\u5316\u7EC4\u4EF6\u751F\u547D\u5468\u671F\u6807\u5FD7\u4F4D\n  initLifecycle(vm);\n  // \u521D\u59CB\u5316\u7EC4\u4EF6\u4E8B\u4EF6\u4FA6\u542C\n  initEvents(vm);\n  // \u521D\u59CB\u5316\u6E32\u67D3\u65B9\u6CD5\n  initRender(vm);\n  callHook(vm, 'beforeCreate');\n  // \u521D\u59CB\u5316\u4F9D\u8D56\u6CE8\u5165\u5185\u5BB9\uFF0C\u5728\u521D\u59CB\u5316data\u3001props\u4E4B\u524D\n  initInjections(vm); // resolve injections before data/props\n  // \u521D\u59CB\u5316props/data/method/watch/methods\n  initState(vm);\n  initProvide(vm); // resolve provide after data/props\n  callHook(vm, 'created');\n\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    vm._name = formatComponentName(vm, false);\n    mark(endTag);\n    measure(`vue ${vm._name} init`, startTag, endTag);\n  }\n  // \u6302\u8F7D\u5143\u7D20\n  if (vm.$options.el) {\n    vm.$mount(vm.$options.el);\n  }\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4ED4\u7EC6\u9605\u8BFB\u4E0A\u9762\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u5F97\u5230\u4EE5\u4E0B\u7ED3\u8BBA\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5728\u8C03\u7528",(0,r.jsx)(n.code,{children:"beforeCreate"}),"\u4E4B\u524D\uFF0C\u6570\u636E\u521D\u59CB\u5316\u5E76\u672A\u5B8C\u6210\uFF0C\u50CF",(0,r.jsx)(n.code,{children:"data"}),"\u3001",(0,r.jsx)(n.code,{children:"props"}),"\u8FD9\u4E9B\u5C5E\u6027\u65E0\u6CD5\u8BBF\u95EE\u5230"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5230\u4E86",(0,r.jsx)(n.code,{children:"created"}),"\u7684\u65F6\u5019\uFF0C\u6570\u636E\u5DF2\u7ECF\u521D\u59CB\u5316\u5B8C\u6210\uFF0C\u80FD\u591F\u8BBF\u95EE",(0,r.jsx)(n.code,{children:"data"}),"\u3001",(0,r.jsx)(n.code,{children:"props"}),"\u8FD9\u4E9B\u5C5E\u6027\uFF0C\u4F46\u8FD9\u65F6\u5019\u5E76\u672A\u5B8C\u6210",(0,r.jsx)(n.code,{children:"dom"}),"\u7684\u6302\u8F7D\uFF0C\u56E0\u6B64\u65E0\u6CD5\u8BBF\u95EE\u5230",(0,r.jsx)(n.code,{children:"dom"}),"\u5143\u7D20"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u6302\u8F7D\u65B9\u6CD5\u662F\u8C03\u7528",(0,r.jsx)(n.code,{children:"vm.$mount"}),"\u65B9\u6CD5"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"initState"}),"\u65B9\u6CD5\u662F\u5B8C\u6210",(0,r.jsx)(n.code,{children:"props/data/method/watch/methods"}),"\u7684\u521D\u59CB\u5316"]}),"\n",(0,r.jsx)(n.p,{children:"\u6E90\u7801\u4F4D\u7F6E\uFF1Asrc\\core\\instance\\state.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export function initState(vm: Component) {\n  // \u521D\u59CB\u5316\u7EC4\u4EF6\u7684watcher\u5217\u8868\n  vm._watchers = [];\n  const opts = vm.$options;\n  // \u521D\u59CB\u5316props\n  if (opts.props) initProps(vm, opts.props);\n  // \u521D\u59CB\u5316methods\u65B9\u6CD5\n  if (opts.methods) initMethods(vm, opts.methods);\n  if (opts.data) {\n    // \u521D\u59CB\u5316data\n    initData(vm);\n  } else {\n    observe((vm._data = {}), true /* asRootData */);\n  }\n  if (opts.computed) initComputed(vm, opts.computed);\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6211\u4EEC\u548C\u8FD9\u91CC\u4E3B\u8981\u770B\u521D\u59CB\u5316",(0,r.jsx)(n.code,{children:"data"}),"\u7684\u65B9\u6CD5\u4E3A",(0,r.jsx)(n.code,{children:"initData"}),"\uFF0C\u5B83\u4E0E",(0,r.jsx)(n.code,{children:"initState"}),"\u5728\u540C\u4E00\u6587\u4EF6\u4E0A"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"function initData(vm: Component) {\n  let data = vm.$options.data;\n  // \u83B7\u53D6\u5230\u7EC4\u4EF6\u4E0A\u7684data\n  data = vm._data = typeof data === 'function' ? getData(data, vm) : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' &&\n      warn(\n        'data functions should return an object:\\n' +\n          'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n        vm\n      );\n  }\n  // proxy data on instance\n  const keys = Object.keys(data);\n  const props = vm.$options.props;\n  const methods = vm.$options.methods;\n  let i = keys.length;\n  while (i--) {\n    const key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      // \u5C5E\u6027\u540D\u4E0D\u80FD\u4E0E\u65B9\u6CD5\u540D\u91CD\u590D\n      if (methods && hasOwn(methods, key)) {\n        warn(`Method \"${key}\" has already been defined as a data property.`, vm);\n      }\n    }\n    // \u5C5E\u6027\u540D\u4E0D\u80FD\u4E0Estate\u540D\u79F0\u91CD\u590D\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' &&\n        warn(`The data property \"${key}\" is already declared as a prop. ` + `Use prop default value instead.`, vm);\n    } else if (!isReserved(key)) {\n      // \u9A8C\u8BC1key\u503C\u7684\u5408\u6CD5\u6027\n      // \u5C06_data\u4E2D\u7684\u6570\u636E\u6302\u8F7D\u5230\u7EC4\u4EF6vm\u4E0A,\u8FD9\u6837\u5C31\u53EF\u4EE5\u901A\u8FC7this.xxx\u8BBF\u95EE\u5230\u7EC4\u4EF6\u4E0A\u7684\u6570\u636E\n      proxy(vm, `_data`, key);\n    }\n  }\n  // observe data\n  // \u54CD\u5E94\u5F0F\u76D1\u542Cdata\u662F\u6570\u636E\u7684\u53D8\u5316\n  observe(data, true /* asRootData */);\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4ED4\u7EC6\u9605\u8BFB\u4E0A\u9762\u7684\u4EE3\u7801\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5F97\u5230\u4EE5\u4E0B\u7ED3\u8BBA\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u521D\u59CB\u5316\u987A\u5E8F\uFF1A",(0,r.jsx)(n.code,{children:"props"}),"\u3001",(0,r.jsx)(n.code,{children:"methods"}),"\u3001",(0,r.jsx)(n.code,{children:"data"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"data"}),"\u5B9A\u4E49\u7684\u65F6\u5019\u53EF\u9009\u62E9\u51FD\u6570\u5F62\u5F0F\u6216\u8005\u5BF9\u8C61\u5F62\u5F0F\uFF08\u7EC4\u4EF6\u53EA\u80FD\u4E3A\u51FD\u6570\u5F62\u5F0F\uFF09"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5173\u4E8E\u6570\u636E\u54CD\u5E94\u5F0F\u5728\u8FD9\u5C31\u4E0D\u5C55\u5F00\u8BE6\u7EC6\u8BF4\u660E"}),"\n",(0,r.jsxs)(n.p,{children:["\u4E0A\u6587\u63D0\u5230\u6302\u8F7D\u65B9\u6CD5\u662F\u8C03\u7528",(0,r.jsx)(n.code,{children:"vm.$mount"}),"\u65B9\u6CD5"]}),"\n",(0,r.jsx)(n.p,{children:"\u6E90\u7801\u4F4D\u7F6E\uFF1A"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Vue.prototype.$mount = function (el?: string | Element, hydrating?: boolean): Component {\n  // \u83B7\u53D6\u6216\u67E5\u8BE2\u5143\u7D20\n  el = el && query(el);\n\n  /* istanbul ignore if */\n  // vue \u4E0D\u5141\u8BB8\u76F4\u63A5\u6302\u8F7D\u5230body\u6216\u9875\u9762\u6587\u6863\u4E0A\n  if (el === document.body || el === document.documentElement) {\n    process.env.NODE_ENV !== 'production' &&\n      warn(`Do not mount Vue to <html> or <body> - mount to normal elements instead.`);\n    return this;\n  }\n\n  const options = this.$options;\n  // resolve template/el and convert to render function\n  if (!options.render) {\n    let template = options.template;\n    // \u5B58\u5728template\u6A21\u677F\uFF0C\u89E3\u6790vue\u6A21\u677F\u6587\u4EF6\n    if (template) {\n      if (typeof template === 'string') {\n        if (template.charAt(0) === '#') {\n          template = idToTemplate(template);\n          /* istanbul ignore if */\n          if (process.env.NODE_ENV !== 'production' && !template) {\n            warn(`Template element not found or is empty: ${options.template}`, this);\n          }\n        }\n      } else if (template.nodeType) {\n        template = template.innerHTML;\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('invalid template option:' + template, this);\n        }\n        return this;\n      }\n    } else if (el) {\n      // \u901A\u8FC7\u9009\u62E9\u5668\u83B7\u53D6\u5143\u7D20\u5185\u5BB9\n      template = getOuterHTML(el);\n    }\n    if (template) {\n      /* istanbul ignore if */\n      if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n        mark('compile');\n      }\n      /**\n       *  1.\u5C06temmplate\u89E3\u6790ast tree\n       *  2.\u5C06ast tree\u8F6C\u6362\u6210render\u8BED\u6CD5\u5B57\u7B26\u4E32\n       *  3.\u751F\u6210render\u65B9\u6CD5\n       */\n      const { render, staticRenderFns } = compileToFunctions(\n        template,\n        {\n          outputSourceRange: process.env.NODE_ENV !== 'production',\n          shouldDecodeNewlines,\n          shouldDecodeNewlinesForHref,\n          delimiters: options.delimiters,\n          comments: options.comments,\n        },\n        this\n      );\n      options.render = render;\n      options.staticRenderFns = staticRenderFns;\n\n      /* istanbul ignore if */\n      if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n        mark('compile end');\n        measure(`vue ${this._name} compile`, 'compile', 'compile end');\n      }\n    }\n  }\n  return mount.call(this, el, hydrating);\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u9605\u8BFB\u4E0A\u9762\u4EE3\u7801\uFF0C\u6211\u4EEC\u80FD\u5F97\u5230\u4EE5\u4E0B\u7ED3\u8BBA\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u4E0D\u8981\u5C06\u6839\u5143\u7D20\u653E\u5230",(0,r.jsx)(n.code,{children:"body"}),"\u6216\u8005",(0,r.jsx)(n.code,{children:"html"}),"\u4E0A"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u53EF\u4EE5\u5728\u5BF9\u8C61\u4E2D\u5B9A\u4E49",(0,r.jsx)(n.code,{children:"template/render"}),"\u6216\u8005\u76F4\u63A5\u4F7F\u7528",(0,r.jsx)(n.code,{children:"template"}),"\u3001",(0,r.jsx)(n.code,{children:"el"}),"\u8868\u793A\u5143\u7D20\u9009\u62E9\u5668"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u6700\u7EC8\u90FD\u4F1A\u89E3\u6790\u6210",(0,r.jsx)(n.code,{children:"render"}),"\u51FD\u6570\uFF0C\u8C03\u7528",(0,r.jsx)(n.code,{children:"compileToFunctions"}),"\uFF0C\u4F1A\u5C06",(0,r.jsx)(n.code,{children:"template"}),"\u89E3\u6790\u6210",(0,r.jsx)(n.code,{children:"render"}),"\u51FD\u6570"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5BF9",(0,r.jsx)(n.code,{children:"template"}),"\u7684\u89E3\u6790\u6B65\u9AA4\u5927\u81F4\u5206\u4E3A\u4EE5\u4E0B\u51E0\u6B65\uFF1A"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5C06",(0,r.jsx)(n.code,{children:"html"}),"\u6587\u6863\u7247\u6BB5\u89E3\u6790\u6210",(0,r.jsx)(n.code,{children:"ast"}),"\u63CF\u8FF0\u7B26"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5C06",(0,r.jsx)(n.code,{children:"ast"}),"\u63CF\u8FF0\u7B26\u89E3\u6790\u6210\u5B57\u7B26\u4E32"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u751F\u6210",(0,r.jsx)(n.code,{children:"render"}),"\u51FD\u6570"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u751F\u6210",(0,r.jsx)(n.code,{children:"render"}),"\u51FD\u6570\uFF0C\u6302\u8F7D\u5230",(0,r.jsx)(n.code,{children:"vm"}),"\u4E0A\u540E\uFF0C\u4F1A\u518D\u6B21\u8C03\u7528",(0,r.jsx)(n.code,{children:"mount"}),"\u65B9\u6CD5"]}),"\n",(0,r.jsx)(n.p,{children:"\u6E90\u7801\u4F4D\u7F6E\uFF1Asrc\\platforms\\web\\runtime\\index.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// public mount method\nVue.prototype.$mount = function (el?: string | Element, hydrating?: boolean): Component {\n  el = el && inBrowser ? query(el) : undefined;\n  // \u6E32\u67D3\u7EC4\u4EF6\n  return mountComponent(this, el, hydrating);\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8C03\u7528",(0,r.jsx)(n.code,{children:"mountComponent"}),"\u6E32\u67D3\u7EC4\u4EF6"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export function mountComponent(vm: Component, el: ?Element, hydrating?: boolean): Component {\n  vm.$el = el;\n  // \u5982\u679C\u6CA1\u6709\u83B7\u53D6\u89E3\u6790\u7684render\u51FD\u6570\uFF0C\u5219\u4F1A\u629B\u51FA\u8B66\u544A\n  // render\u662F\u89E3\u6790\u6A21\u677F\u6587\u4EF6\u751F\u6210\u7684\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') || vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n            'compiler is not available. Either pre-compile the templates into ' +\n            'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        // \u6CA1\u6709\u83B7\u53D6\u5230vue\u7684\u6A21\u677F\u6587\u4EF6\n        warn('Failed to mount component: template or render function not defined.', vm);\n      }\n    }\n  }\n  // \u6267\u884CbeforeMount\u94A9\u5B50\n  callHook(vm, 'beforeMount');\n\n  let updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = () => {\n      const name = vm._name;\n      const id = vm._uid;\n      const startTag = `vue-perf-start:${id}`;\n      const endTag = `vue-perf-end:${id}`;\n\n      mark(startTag);\n      const vnode = vm._render();\n      mark(endTag);\n      measure(`vue ${name} render`, startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure(`vue ${name} patch`, startTag, endTag);\n    };\n  } else {\n    // \u5B9A\u4E49\u66F4\u65B0\u51FD\u6570\n    updateComponent = () => {\n      // \u5B9E\u9645\u8C03\u2F64\u662F\u5728lifeCycleMixin\u4E2D\u5B9A\u4E49\u7684_update\u548CrenderMixin\u4E2D\u5B9A\u4E49\u7684_render\n      vm._update(vm._render(), hydrating);\n    };\n  }\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  // \u76D1\u542C\u5F53\u524D\u7EC4\u4EF6\u72B6\u6001\uFF0C\u5F53\u6709\u6570\u636E\u53D8\u5316\u65F6\uFF0C\u66F4\u65B0\u7EC4\u4EF6\n  new Watcher(\n    vm,\n    updateComponent,\n    noop,\n    {\n      before() {\n        if (vm._isMounted && !vm._isDestroyed) {\n          // \u6570\u636E\u66F4\u65B0\u5F15\u53D1\u7684\u7EC4\u4EF6\u66F4\u65B0\n          callHook(vm, 'beforeUpdate');\n        }\n      },\n    },\n    true /* isRenderWatcher */\n  );\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u9605\u8BFB\u4E0A\u9762\u4EE3\u7801\uFF0C\u6211\u4EEC\u5F97\u5230\u4EE5\u4E0B\u7ED3\u8BBA\uFF1A"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u4F1A\u89E6\u53D1",(0,r.jsx)(n.code,{children:"beforeCreate"}),"\u94A9\u5B50"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5B9A\u4E49",(0,r.jsx)(n.code,{children:"updateComponent"}),"\u6E32\u67D3\u9875\u9762\u89C6\u56FE\u7684\u65B9\u6CD5"]}),"\n",(0,r.jsxs)(n.li,{children:["\u76D1\u542C\u7EC4\u4EF6\u6570\u636E\uFF0C\u4E00\u65E6\u53D1\u751F\u53D8\u5316\uFF0C\u89E6\u53D1",(0,r.jsx)(n.code,{children:"beforeUpdate"}),"\u751F\u547D\u94A9\u5B50"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"updateComponent"}),"\u65B9\u6CD5\u4E3B\u8981\u6267\u884C\u5728",(0,r.jsx)(n.code,{children:"vue"}),"\u521D\u59CB\u5316\u65F6\u58F0\u660E\u7684",(0,r.jsx)(n.code,{children:"render"}),"\uFF0C",(0,r.jsx)(n.code,{children:"update"}),"\u65B9\u6CD5"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"render"}),"\u7684\u4F5C\u7528\u4E3B\u8981\u662F\u751F\u6210",(0,r.jsx)(n.code,{children:"vnode"})]}),"\n",(0,r.jsx)(n.p,{children:"\u6E90\u7801\u4F4D\u7F6E\uFF1Asrc\\core\\instance\\render.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// \u5B9A\u4E49vue \u539F\u578B\u4E0A\u7684render\u65B9\u6CD5\nVue.prototype._render = function (): VNode {\n  const vm: Component = this;\n  // render\u51FD\u6570\u6765\u81EA\u4E8E\u7EC4\u4EF6\u7684option\n  const { render, _parentVnode } = vm.$options;\n\n  if (_parentVnode) {\n    vm.$scopedSlots = normalizeScopedSlots(_parentVnode.data.scopedSlots, vm.$slots, vm.$scopedSlots);\n  }\n\n  // set parent vnode. this allows render functions to have access\n  // to the data on the placeholder node.\n  vm.$vnode = _parentVnode;\n  // render self\n  let vnode;\n  try {\n    // There's no need to maintain a stack because all render fns are called\n    // separately from one another. Nested component's render fns are called\n    // when parent component is patched.\n    currentRenderingInstance = vm;\n    // \u8C03\u7528render\u65B9\u6CD5\uFF0C\u81EA\u5DF1\u7684\u72EC\u7279\u7684render\u65B9\u6CD5\uFF0C \u4F20\u5165createElement\u53C2\u6570\uFF0C\u751F\u6210vNode\n    vnode = render.call(vm._renderProxy, vm.$createElement);\n  } catch (e) {\n    handleError(e, vm, `render`);\n    // return error render result,\n    // or previous vnode to prevent render error causing blank component\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n      try {\n        vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n      } catch (e) {\n        handleError(e, vm, `renderError`);\n        vnode = vm._vnode;\n      }\n    } else {\n      vnode = vm._vnode;\n    }\n  } finally {\n    currentRenderingInstance = null;\n  }\n  // if the returned array contains only a single node, allow it\n  if (Array.isArray(vnode) && vnode.length === 1) {\n    vnode = vnode[0];\n  }\n  // return empty vnode in case the render function errored out\n  if (!(vnode instanceof VNode)) {\n    if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n      warn(\n        'Multiple root nodes returned from render function. Render function ' + 'should return a single root node.',\n        vm\n      );\n    }\n    vnode = createEmptyVNode();\n  }\n  // set parent\n  vnode.parent = _parentVnode;\n  return vnode;\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"_update"}),"\u4E3B\u8981\u529F\u80FD\u662F\u8C03\u7528",(0,r.jsx)(n.code,{children:"patch"}),"\uFF0C\u5C06",(0,r.jsx)(n.code,{children:"vnode"}),"\u8F6C\u6362\u4E3A\u771F\u5B9E",(0,r.jsx)(n.code,{children:"DOM"}),"\uFF0C\u5E76\u4E14\u66F4\u65B0\u5230\u9875\u9762\u4E2D"]}),"\n",(0,r.jsx)(n.p,{children:"\u6E90\u7801\u4F4D\u7F6E\uFF1Asrc\\core\\instance\\lifecycle.js"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"Vue.prototype._update = function (vnode: VNode, hydrating?: boolean) {\n  const vm: Component = this;\n  const prevEl = vm.$el;\n  const prevVnode = vm._vnode;\n  // \u8BBE\u7F6E\u5F53\u524D\u6FC0\u6D3B\u7684\u4F5C\u7528\u57DF\n  const restoreActiveInstance = setActiveInstance(vm);\n  vm._vnode = vnode;\n  // Vue.prototype.__patch__ is injected in entry points\n  // based on the rendering backend used.\n  if (!prevVnode) {\n    // initial render\n    // \u6267\u884C\u5177\u4F53\u7684\u6302\u8F7D\u903B\u8F91\n    vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n  } else {\n    // updates\n    vm.$el = vm.__patch__(prevVnode, vnode);\n  }\n  restoreActiveInstance();\n  // update __vue__ reference\n  if (prevEl) {\n    prevEl.__vue__ = null;\n  }\n  if (vm.$el) {\n    vm.$el.__vue__ = vm;\n  }\n  // if parent is an HOC, update its $el as well\n  if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n    vm.$parent.$el = vm.$el;\n  }\n  // updated hook is called by the scheduler to ensure that children are\n  // updated in a parent's updated hook.\n};\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"\u4E09\u7ED3\u8BBA",children:["\u4E09\u3001\u7ED3\u8BBA",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u4E09\u7ED3\u8BBA",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"new Vue"}),"\u7684\u65F6\u5019\u8C03\u7528\u4F1A\u8C03\u7528",(0,r.jsx)(n.code,{children:"_init"}),"\u65B9\u6CD5"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5B9A\u4E49 ",(0,r.jsx)(n.code,{children:"$set"}),"\u3001",(0,r.jsx)(n.code,{children:"$get"})," \u3001",(0,r.jsx)(n.code,{children:"$delete"}),"\u3001",(0,r.jsx)(n.code,{children:"$watch"})," \u7B49\u65B9\u6CD5"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5B9A\u4E49 ",(0,r.jsx)(n.code,{children:"$on"}),"\u3001",(0,r.jsx)(n.code,{children:"$off"}),"\u3001",(0,r.jsx)(n.code,{children:"$emit"}),"\u3001",(0,r.jsx)(n.code,{children:"$off"}),"\u7B49\u4E8B\u4EF6"]}),"\n",(0,r.jsxs)(n.li,{children:["\u5B9A\u4E49 ",(0,r.jsx)(n.code,{children:"_update"}),"\u3001",(0,r.jsx)(n.code,{children:"$forceUpdate"}),"\u3001",(0,r.jsx)(n.code,{children:"$destroy"}),"\u751F\u547D\u5468\u671F"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u8C03\u7528",(0,r.jsx)(n.code,{children:"$mount"}),"\u8FDB\u884C\u9875\u9762\u7684\u6302\u8F7D"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u6302\u8F7D\u7684\u65F6\u5019\u4E3B\u8981\u662F\u901A\u8FC7",(0,r.jsx)(n.code,{children:"mountComponent"}),"\u65B9\u6CD5"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u5B9A\u4E49",(0,r.jsx)(n.code,{children:"updateComponent"}),"\u66F4\u65B0\u51FD\u6570"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u6267\u884C",(0,r.jsx)(n.code,{children:"render"}),"\u751F\u6210\u865A\u62DF",(0,r.jsx)(n.code,{children:"DOM"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"_update"}),"\u5C06\u865A\u62DF",(0,r.jsx)(n.code,{children:"DOM"}),"\u751F\u6210\u771F\u5B9E",(0,r.jsx)(n.code,{children:"DOM"}),"\u7ED3\u6784\uFF0C\u5E76\u4E14\u6E32\u67D3\u5230\u9875\u9762\u4E2D"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"\u53C2\u8003\u6587\u732E",children:["\u53C2\u8003\u6587\u732E",(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u8003\u6587\u732E",children:"#"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.cnblogs.com/gerry2019/p/12001661.html",target:"_blank",rel:"noopener noreferrer",children:"https://www.cnblogs.com/gerry2019/p/12001661.html"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/vuejs/vue/tree/dev/src/core/instance",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/vuejs/vue/tree/dev/src/core/instance"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://vue3js.cn",target:"_blank",rel:"noopener noreferrer",children:"https://vue3js.cn"})}),"\n"]})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(s,{...e})}):s(e)}n.default=i,i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["interview%2Fvue%2Fnew_vue.md"]={toc:[{text:"\u4E00\u3001\u601D\u8003",id:"\u4E00\u601D\u8003",depth:2},{text:"\u4E00\u3001\u5206\u6790",id:"\u4E00\u5206\u6790",depth:2},{text:"\u4E09\u3001\u7ED3\u8BBA",id:"\u4E09\u7ED3\u8BBA",depth:2},{text:"\u53C2\u8003\u6587\u732E",id:"\u53C2\u8003\u6587\u732E",depth:2}],title:"Vue \u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B",frontmatter:{icon:"question",description:"\u524D\u7AEF\u7269\u8BED|\u9762\u8BD5\u7269\u8BED-Vue \u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B",footer:"<a href='https://beian.mit.gov.cn/' target='blank'>\u6D59ICP\u59072021037683\u53F7-2</a>Vue \u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B",order:6,star:6,date:"2023-03-05T00:00:00.000Z",author:"h7ml",image:"https://www.h7ml.cn/logo.png",banner:"https://www.h7ml.cn/logo.png",category:["interview","vue"],tag:["interview","vue"],shortTitle:"\u524D\u7AEF\u7269\u8BED|\u9762\u8BD5\u7269\u8BED-Vue \u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B",isOriginal:!1,head:[["meta",{name:"keywords",content:"Vue \u5B9E\u4F8B\u6302\u8F7D\u7684\u8FC7\u7A0B"}]]}}}}]);