---
icon: javascript
order: 1
date: 2024-09-04
author: h7ml
title: 正则表达式的前瞻、负前瞻、后顾和负后顾
description: 正则表达式的前瞻、负前瞻、后顾和负后顾
footer: <a href='https://beian.mit.gov.cn/' target='blank'>浙ICP备2021037683号-2</a>正则表达式的前瞻、负前瞻、后顾和负后顾
star: 1
image: https://www.h7ml.cn/logo.png
banner: https://www.h7ml.cn/logo.png
shortTitle: 正则表达式的前瞻、负前瞻、后顾和负后顾
category:
  - javascript
tag:
  - javascript
head:
  - - meta
    - name: keywords
      content: 正则表达式的前瞻、负前瞻、后顾和负后顾
---

在逛`github`的时候，发现一个很有意思的`utils` [userhjp/datav-react](https://github.com/userhjp/datav-react/blob/main/src/examples/widgets/echarts/pie/RosePie/preview.tsx#L34)

```ts
const formatNumber = function (num) {
  const reg = /(?=(\B)(\d{3})+$)/g;
  return num.toString().replace(reg, ',');
};
```

`/(?=(\B)(\d{3})+$)/g`

- `(\B)`：这是一个捕获组，表示匹配位置的前一个字符必须不是一个单词边界（非单词字符和单词字符之间的位置）。

- `(\d{3})+`：这是另一个捕获组，表示匹配连续的三个数字。

- `(?=`：这是一个正向前瞻，它要求匹配位置的后面必须满足捕获组 `(\B)(\d{3})+` 的模式。

- `g：`这是全局标志，表示查找所有匹配项而不仅仅是第一个。

因此，这个正则表达式的作用是，在每三个数字之前插入一个逗号 ,，并确保它们之前不是单词边界。这正是您在示例中的预期输出：`1,000,000,000`。它将 `1000000000` 转换为格式化的金额字符串。

## 前瞻 (?=exp)

前瞻是一种正向查找，它用于查找匹配的内容后面必须满足某个条件（exp）的情况。

### 示例：

```js
// 查找后面是123的abc
const regex = /abc(?=123)/g;
console.log('abc123'.match(regex)); // 匹配结果：['abc']
console.log('kabc1234'.match(regex)); // 匹配结果：['abc']
console.log('abc12'.match(regex)); // 不匹配
console.log('abcc123'.match(regex)); // 不匹配
```

## 负前瞻 (?!exp)

负前瞻是一种负向查找，它用于查找匹配的内容后面必须不满足某个条件（exp）的情况。

### 示例：

```js
// 查找后面不是123的abc
const regex = /abc(?!123)/g;
console.log('abc123'.match(regex)); // 不匹配
console.log('abc1233'.match(regex)); // 不匹配
console.log('abc12'.match(regex)); // 匹配结果：['abc']
console.log('abcc123'.match(regex)); // 匹配结果：['abc']
```

## 后顾 (?<=exp)

后顾是一种正向查找，它用于查找匹配的内容前面必须满足某个条件（exp）的情况。

### 示例：

```js
// 查找前面是abc的123
const regex = /(?<=abc)123/g;
console.log('abc123'.match(regex)); // 匹配结果：['123']
console.log('kabc1234'.match(regex)); // 匹配结果：['123']
console.log('abc12'.match(regex)); // 不匹配
console.log('abcc123'.match(regex)); // 不匹配
```

## 负后顾 (?<!exp)

负后顾是一种负向查找，它用于查找匹配的内容前面必须不满足某个条件（exp）的情况。

### 示例：

```js
// 查找前面不是abc的123
const regex = /(?<!abc)123/g;
console.log('abc123'.match(regex)); // 不匹配
console.log('kabc1234'.match(regex)); // 不匹配
console.log('ab1234'.match(regex)); // 匹配结果：['123']
console.log('abcc123'.match(regex)); // 匹配结果：['123']
```

正则表达式的前瞻、负前瞻、后顾和负后顾是一些强大的技巧，用于在文本中查找特定的模式，
